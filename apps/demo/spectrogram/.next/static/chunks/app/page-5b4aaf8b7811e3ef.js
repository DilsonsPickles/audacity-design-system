(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{39:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>j});var a=n(889),o=n(3149),l=e=>{let{variant:t="secondary",size:n="default",children:o,icon:l,showIcon:s=!0,disabled:c=!1,onClick:r,className:i="",type:d="button",tabIndex:u}=e;return(0,a.jsxs)("button",{type:d,className:"button button--".concat(t," button--").concat(n," ").concat(c?"button--disabled":""," ").concat(i),onClick:r,disabled:c,tabIndex:u,children:[s&&l&&(0,a.jsx)("span",{className:"button__icon musescore-icon",children:l}),(0,a.jsx)("span",{className:"button__text",children:o})]})},s={mixer:"",menu:"",undo:"",redo:"",play:"",pause:"",stop:"",record:"",rewind:"",forward:"","skip-back":"","skip-forward":"",loop:"",plus:"","zoom-in":"","zoom-out":"",automation:"",cloud:"","cloud-sync":"",copy:"",paste:"",cut:"",spectrogram:"",cog:"",trash:"",silence:"",trim:"",waveform:"",playhead:"","caret-down":"",close:"",user:"",book:"",brush:"",volume:"",metronome:"",plug:"",microphone:"",keyboard:""},c=e=>{let{name:t,size:n=16,color:o="#14151a",className:l=""}=e,c=s[t]||"";return(0,a.jsx)("span",{className:"icon musescore-icon ".concat(l),style:{fontSize:"".concat(n,"px"),color:o},"aria-hidden":"true",children:c})},r=e=>{let{icon:t="menu",label:n,onClick:o,disabled:l=!1,active:s=!1,className:r="",ariaLabel:i}=e;return(0,a.jsxs)("button",{type:"button",className:"ghost-button ".concat(n?"ghost-button--with-label":""," ").concat(l?"ghost-button--disabled":""," ").concat(s?"ghost-button--active":""," ").concat(r),onClick:o,disabled:l,"aria-label":i,children:[(0,a.jsx)(c,{name:t,size:16}),n&&(0,a.jsx)("span",{className:"ghost-button__label",children:n})]})},i=e=>{let{value:t=0,onChange:n,className:o="",disabled:l=!1,tabIndex:s=0,id:c}=e,r=Math.max(-100,Math.min(100,t)),i=135*Math.abs(r/100),d=r<0,u=d?0-i:0,m=d?"#84b5ff":"#677ce4";return(0,a.jsxs)("div",{className:"pan-knob ".concat(o),children:[(0,a.jsx)("div",{className:"pan-knob__gauge"}),0!==r&&(0,a.jsx)("div",{className:"pan-knob__value-sweep",style:{background:"conic-gradient(\n              from ".concat(u,"deg,\n              ").concat(m," 0deg,\n              ").concat(m," ").concat(i,"deg,\n              transparent ").concat(i,"deg\n            )")}}),(0,a.jsxs)("div",{className:"pan-knob__knob-group",style:{transform:"rotate(".concat(r/100*135,"deg)")},children:[(0,a.jsx)("div",{className:"pan-knob__dial-border"}),(0,a.jsx)("div",{className:"pan-knob__dial",children:(0,a.jsx)("div",{className:"pan-knob__indicator"})})]})]})},d=e=>{let{value:t=50,min:n=0,max:o=100,onChange:l,className:s="",disabled:c=!1,ariaLabel:r="Slider"}=e,i=Math.max(n,Math.min(o,t)),d=(i-n)/(o-n)*100;return(0,a.jsxs)("div",{className:"slider ".concat(c?"slider--disabled":""," ").concat(s),children:[(0,a.jsx)("input",{type:"range",min:n,max:o,value:i,onChange:e=>{let t=parseInt(e.target.value,10);null==l||l(t)},disabled:c,className:"slider__input","aria-label":r}),(0,a.jsx)("div",{className:"slider__track",children:(0,a.jsx)("div",{className:"slider__fill",style:{width:"".concat(d,"%")}})}),(0,a.jsx)("div",{className:"slider__handle",style:{left:"calc(".concat(d,"% - ").concat(d/100*16,"px)")}})]})},u=e=>{let{active:t=!1,children:n,onClick:o,disabled:l=!1,className:s="",ariaLabel:c}=e;return(0,a.jsx)("button",{type:"button",className:"toggle-button ".concat(t?"toggle-button--active":""," ").concat(l?"toggle-button--disabled":""," ").concat(s),onClick:o,disabled:l,"aria-label":c,"aria-pressed":t,children:n})};function m(e){let{icon:t,isActive:n=!1,onClick:l,disabled:s=!1,className:r=""}=e,[i,d]=o.useState(!1),u="toggle-tool-button--off";return u=s?"toggle-tool-button--disabled":n?i?"toggle-tool-button--on-hover":"toggle-tool-button--on":i?"toggle-tool-button--off-hover":"toggle-tool-button--off",(0,a.jsx)("button",{className:"toggle-tool-button ".concat(u," ").concat(r),onClick:()=>{!s&&l&&l()},onMouseEnter:()=>{s||d(!0)},onMouseLeave:()=>{d(!1)},disabled:s,type:"button","aria-pressed":n,children:(0,a.jsx)(c,{name:t,size:16,color:n?"#ffffff":"#14151a"})})}var p=e=>{let{trackName:t,trackType:n="mono",volume:s=75,pan:m=0,isMuted:p=!1,isSolo:x=!1,isFocused:h=!1,isMenuOpen:v=!1,onVolumeChange:g,onPanChange:b,onMuteToggle:f,onSoloToggle:k,onEffectsClick:j,onMenuClick:_,onClick:N,className:y="",state:w="idle",height:C="default"}=e,[E,M]=(0,o.useState)(!1);return(0,a.jsxs)("div",{className:"track-control-panel track-control-panel--".concat("idle"!==w?w:E?"hover":"idle"," track-control-panel--").concat(C," ").concat(h?"track-control-panel--focused":""," ").concat(y),onMouseEnter:()=>M(!0),onMouseLeave:()=>M(!1),onClick:N,children:[(0,a.jsxs)("div",{className:"track-control-panel__main",children:[(0,a.jsxs)("div",{className:"track-control-panel__header",children:[(0,a.jsxs)("div",{className:"track-control-panel__track-name",children:[(0,a.jsx)("button",{className:"track-control-panel__icon-button","aria-label":"Track icon",children:(0,a.jsx)(c,{name:"mixer",size:16})}),(0,a.jsx)("span",{className:"track-control-panel__track-name-text",children:t})]}),(0,a.jsx)(r,{onClick:_,active:v,ariaLabel:"Track menu"})]}),"collapsed"!==C&&(0,a.jsxs)("div",{className:"track-control-panel__controls-row",children:[(0,a.jsx)(i,{value:m,onChange:b}),(0,a.jsx)(d,{value:s,onChange:g,ariaLabel:"Volume"}),(0,a.jsxs)("div",{className:"track-control-panel__button-group",children:[(0,a.jsx)(u,{active:p,onClick:f,ariaLabel:"Mute",children:"M"}),(0,a.jsx)(u,{active:x,onClick:k,ariaLabel:"Solo",children:"S"})]})]}),"default"===C&&(0,a.jsx)(l,{variant:"secondary",size:"small",onClick:j,showIcon:!1,children:"Effects"})]}),"collapsed"!==C&&(0,a.jsx)("div",{className:"track-control-panel__meter",children:(0,a.jsxs)("div",{className:"track-control-panel__meter-bar",children:[(0,a.jsx)("div",{className:"track-control-panel__meter-clip"}),(0,a.jsx)("div",{className:"track-control-panel__meter-main"})]})})]})},x=e=>{let{isOpen:t,onClose:n,x:l,y:s,children:c,className:r=""}=e,i=(0,o.useRef)(null);return((0,o.useEffect)(()=>{if(!t)return;let e=e=>{i.current&&!i.current.contains(e.target)&&n()};return setTimeout(()=>{document.addEventListener("mousedown",e)},0),()=>document.removeEventListener("mousedown",e)},[t,n]),(0,o.useEffect)(()=>{if(!t)return;let e=e=>{"Escape"===e.key&&n()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,n]),(0,o.useEffect)(()=>{if(!t||!i.current)return;let e=i.current,n=e.getBoundingClientRect(),a=window.innerWidth,o=window.innerHeight,c=l,r=s;n.right>a&&(c=a-n.width-10),n.bottom>o&&(r=o-n.height-10),c<0&&(c=10),r<0&&(r=10),(c!==l||r!==s)&&(e.style.left="".concat(c,"px"),e.style.top="".concat(r,"px"))},[t,l,s]),t)?(0,a.jsx)("div",{ref:i,className:"context-menu ".concat(r),style:{position:"fixed",left:"".concat(l,"px"),top:"".concat(s,"px"),zIndex:1e4},children:c}):null},h=e=>{let{label:t,onClick:n,disabled:l=!1,children:s,hasSubmenu:c=!1,icon:r,onClose:i}=e,[d,u]=(0,o.useState)(!1),m=(0,o.useRef)(null),p=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(!d)return;let e=e=>{m.current&&!m.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[d]),(0,a.jsxs)("div",{ref:m,className:"context-menu-item ".concat(l?"disabled":""," ").concat(d?"submenu-open":""),onClick:e=>{l||(c||s?(e.stopPropagation(),u(!d)):(null==n||n(),null==i||i()))},onMouseEnter:()=>{(c||s)&&u(!0)},onMouseLeave:e=>{p.current&&e.relatedTarget instanceof Node&&p.current.contains(e.relatedTarget)||u(!1)},children:[(0,a.jsxs)("div",{className:"context-menu-item-content",children:[r&&(0,a.jsx)("span",{className:"context-menu-item-icon",children:r}),(0,a.jsx)("span",{className:"context-menu-item-label",children:t}),(c||s)&&(0,a.jsx)("span",{className:"context-menu-item-arrow",children:"▸"})]}),(c||s)&&d&&(0,a.jsx)("div",{ref:p,className:"context-menu-submenu",children:o.Children.map(s,e=>o.isValidElement(e)?o.cloneElement(e,{onClose:i}):e)})]})},v=e=>{let{children:t,initialHeight:n=114,minHeight:l=44,maxHeight:s,resizeEdge:c="bottom",resizeThreshold:r=8,onHeightChange:i,onResizeStart:d,onResizeEnd:u,className:m="",isFirstPanel:p=!1}=e,[x,h]=(0,o.useState)(n),[v,g]=(0,o.useState)(!1),[b,f]=(0,o.useState)(!1),k=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(!v)return;let e=e=>{if(k.current){let t=e.clientY-k.current.y,n=k.current.height+t;n=Math.max(l,n),void 0!==s&&(n=Math.min(s,n)),h(n),null==i||i(n)}},t=()=>{g(!1),k.current=null,null==u||u()};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}},[v,l,s,i,u]),(0,a.jsx)("div",{className:"resizable-panel ".concat(m),style:{position:"relative",height:"".concat(x,"px")},children:(0,a.jsx)("div",{className:"resizable-panel__content ".concat(b?"resizable-panel__content--resize-cursor":""),style:{height:"".concat(x,"px"),cursor:b?"ns-resize":"default",position:"relative"},onMouseMove:e=>{if(!v){let t=e.currentTarget.getBoundingClientRect(),n=e.clientY-t.top,a=!1;("bottom"===c||"both"===c)&&(a=n>=x-r&&n<=x),a||"top"!==c&&"both"!==c||(a=n>=0&&n<=r),f(a)}},onMouseDown:e=>{let t=e.currentTarget.getBoundingClientRect(),n=e.clientY-t.top,a=!1;("bottom"===c||"both"===c)&&(a=n>=x-r&&n<=x),a||"top"!==c&&"both"!==c||(a=n>=0&&n<=r),a&&(e.preventDefault(),e.stopPropagation(),g(!0),k.current={y:e.clientY,height:x},null==d||d())},onMouseLeave:()=>{v||f(!1)},children:t})})},g=e=>{let{position:t="left",width:n=200,resizable:l=!0,minWidth:s=150,maxWidth:c=400,children:r,className:i="",onResize:d}=e,[u,m]=o.useState(n),[p,x]=o.useState(!1),h=o.useRef(null);return o.useEffect(()=>{if(!p)return;let e=e=>{let n;if(!h.current)return;let a=h.current.getBoundingClientRect();m(n=Math.max(s,Math.min(c,n="left"===t?e.clientX-a.left:a.right-e.clientX))),null==d||d(n)},n=()=>{x(!1)};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",n),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n)}},[p,t,s,c,d]),(0,a.jsxs)("div",{ref:h,className:"side-panel side-panel--".concat(t," ").concat(p?"side-panel--resizing":""," ").concat(i),style:{width:u},children:[(0,a.jsx)("div",{className:"side-panel__content",children:r}),l&&(0,a.jsx)("div",{className:"side-panel__resize-handle side-panel__resize-handle--".concat(t),onMouseDown:e=>{l&&(e.preventDefault(),x(!0))}})]})};function b(e){let{height:t=48,children:n,rightContent:o,className:l=""}=e;return(0,a.jsxs)("div",{className:"toolbar ".concat(l),style:{height:"".concat(t,"px")},children:[(0,a.jsx)("div",{className:"toolbar__content",children:n}),o&&(0,a.jsx)("div",{className:"toolbar__right",children:o})]})}var f=e=>{let{children:t,resizable:n=!1,minWidth:s=280,maxWidth:r=280,trackHeights:i=[],focusedTrackIndex:d=null,onResize:u,onTrackResize:m,onAddTrack:p,onDeleteTrack:b,onMoveTrackUp:f,onMoveTrackDown:k,onTrackViewChange:j,trackViewModes:_=[],className:N="",scrollRef:y,onScroll:w}=e,C=o.Children.toArray(t),[E,M]=(0,o.useState)({isOpen:!1,trackIndex:-1,x:0,y:0}),S=()=>{M({isOpen:!1,trackIndex:-1,x:0,y:0})};return(0,a.jsxs)(g,{position:"left",width:280,resizable:n,minWidth:s,maxWidth:r,onResize:u,className:"track-control-side-panel ".concat(N),children:[(0,a.jsxs)("div",{className:"track-control-side-panel__header",children:[(0,a.jsx)("h2",{className:"track-control-side-panel__title",children:"Tracks"}),(0,a.jsx)(l,{variant:"secondary",size:"default",onClick:p,showIcon:!0,icon:(0,a.jsx)(c,{name:"plus",size:16}),children:"Add new"})]}),(0,a.jsx)("div",{className:"track-control-side-panel__list",ref:y,onScroll:w,children:C.map((e,t)=>{let n=i[t]||114,l=d===t;return(0,a.jsx)(v,{initialHeight:n,minHeight:44,maxHeight:400,className:"track-control-side-panel__track",isFirstPanel:0===t,onHeightChange:e=>null==m?void 0:m(t,e),children:(0,o.cloneElement)(e,{...e.props,isFocused:l,isMenuOpen:E.isOpen&&E.trackIndex===t,onMenuClick:e=>((e,t)=>{if(t){let n=t.currentTarget.getBoundingClientRect();M({isOpen:!0,trackIndex:e,x:n.left,y:n.bottom+1})}else{let t=document.querySelector(".track-control-side-panel__track:nth-child(".concat(e+1,")"));if(t){let n=t.getBoundingClientRect();M({isOpen:!0,trackIndex:e,x:n.right+4,y:n.top+40})}}})(t,e)})},e.key||t)})}),(0,a.jsxs)(x,{isOpen:E.isOpen,x:E.x,y:E.y,onClose:S,children:[(0,a.jsx)(h,{label:"Delete",onClick:()=>{null==b||b(E.trackIndex),S()}}),(0,a.jsx)(h,{label:"Move track up",onClick:()=>{null==f||f(E.trackIndex),S()},disabled:0===E.trackIndex}),(0,a.jsx)(h,{label:"Move track down",onClick:()=>{null==k||k(E.trackIndex),S()},disabled:E.trackIndex===C.length-1}),(0,a.jsx)("div",{className:"context-menu-separator"}),(0,a.jsxs)(h,{label:"Track view",hasSubmenu:!0,onClose:S,children:[(0,a.jsx)(h,{label:"Waveform",icon:"waveform"===_[E.trackIndex]||void 0===_[E.trackIndex]?(0,a.jsx)("span",{style:{fontSize:"14px"},children:"✓"}):void 0,onClick:()=>{null==j||j(E.trackIndex,"waveform")}}),(0,a.jsx)(h,{label:"Spectrogram",icon:"spectrogram"===_[E.trackIndex]?(0,a.jsx)("span",{style:{fontSize:"14px"},children:"✓"}):void 0,onClick:()=>{null==j||j(E.trackIndex,"spectrogram")}}),(0,a.jsx)(h,{label:"Split view",icon:"split"===_[E.trackIndex]?(0,a.jsx)("span",{style:{fontSize:"14px"},children:"✓"}):void 0,onClick:()=>{null==j||j(E.trackIndex,"split")}})]})]})]})};let k=[{id:1,name:"Track 1",height:114},{id:2,name:"Track 2",height:114},{id:3,name:"Track 3",height:114}];function j(){let[e,t]=(0,o.useState)(!1),[n,l]=(0,o.useState)([]);return(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh",width:"100vw"},children:[(0,a.jsxs)(b,{children:[(0,a.jsx)(r,{icon:"menu"}),(0,a.jsx)(r,{icon:"cloud"}),(0,a.jsx)("div",{style:{width:"1px",height:"24px",backgroundColor:"#d4d5d9",margin:"0 8px"}}),(0,a.jsx)(r,{icon:"skip-back"}),(0,a.jsx)(r,{icon:"play"}),(0,a.jsx)(r,{icon:"skip-forward"}),(0,a.jsx)("div",{style:{width:"1px",height:"24px",backgroundColor:"#d4d5d9",margin:"0 8px"}}),(0,a.jsx)(m,{icon:"waveform",isActive:e,onClick:()=>t(!e)})]}),(0,a.jsxs)("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[(0,a.jsx)(f,{trackHeights:k.map(e=>e.height),children:k.map((e,t)=>(0,a.jsx)(p,{trackName:e.name,trackType:"mono",volume:75,pan:0,isMuted:!1,isSolo:!1,onMuteToggle:()=>{},onSoloToggle:()=>{},state:n.includes(t)?"active":"idle",height:"default",onClick:()=>l([t])},e.id))}),(0,a.jsx)("div",{style:{flex:1,overflow:"auto",backgroundColor:"#212433",display:"flex",alignItems:"center",justifyContent:"center",color:"#888"},children:(0,a.jsx)("p",{children:"Spectrogram canvas will go here"})})]})]})}},9965:(e,t,n)=>{Promise.resolve().then(n.bind(n,39))}},e=>{e.O(0,[670,965,358],()=>e(e.s=9965)),_N_E=e.O()}]);