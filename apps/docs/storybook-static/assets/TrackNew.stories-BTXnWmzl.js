import{ae as w,r as xe,af as We,R as le,ag as Tt}from"./iframe-cFmfFvS6.js";import"./preload-helper-C1FmrZbK.js";const wt={mixer:"",menu:"",gripper:"",undo:"",redo:"",play:"",pause:"",stop:"",record:"",rewind:"",forward:"","skip-back":"","skip-forward":"",loop:"",plus:"","zoom-in":"","zoom-out":"",automation:"",cloud:"","cloud-sync":"",export:"",copy:"",paste:"",cut:"",spectrogram:"",cog:"",trash:"",silence:"",trim:"",waveform:"",playhead:"","caret-down":"",close:"",user:"",book:"",brush:"",volume:"",metronome:"",plug:"",plugins:"",microphone:"",keyboard:"",label:"",midi:"","chevron-left":"","chevron-right":"","zoom-toggle":"","zoom-to-selection":"","zoom-to-fit":"",power:"",save:""},ft=({name:e,size:n=16,color:u,className:i=""})=>{const l=wt[e]||"";return w.jsx("span",{className:`icon musescore-icon ${i}`,style:{fontSize:`${n}px`,...u&&{color:u}},"aria-hidden":"true",children:l})};ft.__docgenInfo={description:"",methods:[],displayName:"Icon",props:{name:{required:!0,tsType:{name:"union",raw:`| 'mixer'
| 'menu'
| 'gripper'
| 'undo'
| 'redo'
| 'play'
| 'pause'
| 'stop'
| 'record'
| 'rewind'
| 'forward'
| 'skip-back'
| 'skip-forward'
| 'loop'
| 'plus'
| 'zoom-in'
| 'zoom-out'
| 'automation'
| 'cloud'
| 'cloud-sync'
| 'export'
| 'copy'
| 'paste'
| 'cut'
| 'spectrogram'
| 'cog'
| 'trash'
| 'silence'
| 'trim'
| 'waveform'
| 'playhead'
| 'caret-down'
| 'close'
| 'user'
| 'book'
| 'brush'
| 'volume'
| 'metronome'
| 'plug'
| 'plugins'
| 'microphone'
| 'keyboard'
| 'label'
| 'midi'
| 'chevron-left'
| 'chevron-right'
| 'zoom-toggle'
| 'zoom-to-selection'
| 'zoom-to-fit'
| 'power'
| 'save'`,elements:[{name:"literal",value:"'mixer'"},{name:"literal",value:"'menu'"},{name:"literal",value:"'gripper'"},{name:"literal",value:"'undo'"},{name:"literal",value:"'redo'"},{name:"literal",value:"'play'"},{name:"literal",value:"'pause'"},{name:"literal",value:"'stop'"},{name:"literal",value:"'record'"},{name:"literal",value:"'rewind'"},{name:"literal",value:"'forward'"},{name:"literal",value:"'skip-back'"},{name:"literal",value:"'skip-forward'"},{name:"literal",value:"'loop'"},{name:"literal",value:"'plus'"},{name:"literal",value:"'zoom-in'"},{name:"literal",value:"'zoom-out'"},{name:"literal",value:"'automation'"},{name:"literal",value:"'cloud'"},{name:"literal",value:"'cloud-sync'"},{name:"literal",value:"'export'"},{name:"literal",value:"'copy'"},{name:"literal",value:"'paste'"},{name:"literal",value:"'cut'"},{name:"literal",value:"'spectrogram'"},{name:"literal",value:"'cog'"},{name:"literal",value:"'trash'"},{name:"literal",value:"'silence'"},{name:"literal",value:"'trim'"},{name:"literal",value:"'waveform'"},{name:"literal",value:"'playhead'"},{name:"literal",value:"'caret-down'"},{name:"literal",value:"'close'"},{name:"literal",value:"'user'"},{name:"literal",value:"'book'"},{name:"literal",value:"'brush'"},{name:"literal",value:"'volume'"},{name:"literal",value:"'metronome'"},{name:"literal",value:"'plug'"},{name:"literal",value:"'plugins'"},{name:"literal",value:"'microphone'"},{name:"literal",value:"'keyboard'"},{name:"literal",value:"'label'"},{name:"literal",value:"'midi'"},{name:"literal",value:"'chevron-left'"},{name:"literal",value:"'chevron-right'"},{name:"literal",value:"'zoom-toggle'"},{name:"literal",value:"'zoom-to-selection'"},{name:"literal",value:"'zoom-to-fit'"},{name:"literal",value:"'power'"},{name:"literal",value:"'save'"}]},description:"Icon name from MusescoreIcon font"},size:{required:!1,tsType:{name:"number"},description:"Icon size in pixels",defaultValue:{value:"16",computed:!1}},color:{required:!1,tsType:{name:"string"},description:"Icon color"},className:{required:!1,tsType:{name:"string"},description:"Additional CSS classes",defaultValue:{value:"''",computed:!1}}}};const Mt=xe.createContext(void 0);function yt(){const e=xe.useContext(Mt);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}const gt=({color:e="blue",selected:n=!1,inTimeSelection:u=!1,state:i="default",name:l="Clip",width:r=272,showPitch:v=!1,pitchValue:d="4.04",showSpeed:x=!1,speedValue:p="112%",showMenu:q=!0,onClick:y,onMenuClick:b,onMouseEnter:f,onMouseLeave:Q,clipStartTime:K=0,clipDuration:Y=0,timeSelectionRange:z=null,pixelsPerSecond:h=100})=>{const{theme:g}=yt(),W={"--clip-header-text":g.foreground.text.primary},M=["clip-header",`clip-header--${e}`,i==="hover"&&"clip-header--hover",n&&"clip-header--selected"].filter(Boolean).join(" "),ne=j=>{j.stopPropagation(),b==null||b(j)};let me=null;if(u&&z&&!n){const j=K+Y,H=Math.max(K,z.startTime),c=Math.min(j,z.endTime);if(H<c){const T=(H-K)*h,X=(c-H)*h;me={left:T,width:X}}}return w.jsxs("div",{className:M,style:{width:`${r}px`,position:"relative",...W},onClick:y,onMouseEnter:f,onMouseLeave:Q,"data-color":e,"data-state":i,"data-selected":n,children:[me&&w.jsx("div",{className:"clip-header__time-selection-overlay",style:{position:"absolute",left:`${me.left}px`,width:`${me.width}px`,top:0,bottom:0,backgroundColor:`var(--clip-${e}-time-selection-header)`,pointerEvents:"none",zIndex:0}}),w.jsxs("div",{className:"clip-header__content",children:[w.jsx("span",{className:"clip-header__name",children:l}),w.jsxs("div",{className:"clip-header__info",children:[v&&w.jsxs("div",{className:"clip-header__badge",children:[w.jsx("span",{className:"clip-header__badge-icon",children:"♪"}),w.jsx("span",{className:"clip-header__badge-value",children:d})]}),x&&w.jsxs("div",{className:"clip-header__badge",children:[w.jsx("span",{className:"clip-header__badge-icon",children:"⚡"}),w.jsx("span",{className:"clip-header__badge-value",children:p})]}),q&&w.jsx("button",{className:"clip-header__menu-button",onClick:ne,"aria-label":"Clip menu",type:"button",tabIndex:-1,children:w.jsx(ft,{name:"menu",size:14})})]})]})]})};gt.__docgenInfo={description:`ClipHeader - The header section of an audio clip

Displays the clip name, optional pitch/speed indicators, and a menu button.
Uses the Audacity 9-color clip palette with proper hover and selected states.`,methods:[],displayName:"ClipHeader",props:{color:{required:!1,tsType:{name:"union",raw:"'cyan' | 'blue' | 'violet' | 'magenta' | 'red' | 'orange' | 'yellow' | 'green' | 'teal' | 'classic'",elements:[{name:"literal",value:"'cyan'"},{name:"literal",value:"'blue'"},{name:"literal",value:"'violet'"},{name:"literal",value:"'magenta'"},{name:"literal",value:"'red'"},{name:"literal",value:"'orange'"},{name:"literal",value:"'yellow'"},{name:"literal",value:"'green'"},{name:"literal",value:"'teal'"},{name:"literal",value:"'classic'"}]},description:"Clip color from the 9-color palette",defaultValue:{value:"'blue'",computed:!1}},selected:{required:!1,tsType:{name:"boolean"},description:"Whether the parent clip is selected",defaultValue:{value:"false",computed:!1}},inTimeSelection:{required:!1,tsType:{name:"boolean"},description:"Whether the clip is within a time selection",defaultValue:{value:"false",computed:!1}},state:{required:!1,tsType:{name:"union",raw:"'default' | 'hover'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'hover'"}]},description:"Interaction state",defaultValue:{value:"'default'",computed:!1}},name:{required:!1,tsType:{name:"string"},description:"Clip name to display",defaultValue:{value:"'Clip'",computed:!1}},width:{required:!1,tsType:{name:"number"},description:"Width in pixels",defaultValue:{value:"272",computed:!1}},showPitch:{required:!1,tsType:{name:"boolean"},description:"Whether to show pitch indicator",defaultValue:{value:"false",computed:!1}},pitchValue:{required:!1,tsType:{name:"string"},description:"Pitch value to display",defaultValue:{value:"'4.04'",computed:!1}},showSpeed:{required:!1,tsType:{name:"boolean"},description:"Whether to show speed indicator",defaultValue:{value:"false",computed:!1}},speedValue:{required:!1,tsType:{name:"string"},description:"Speed value to display",defaultValue:{value:"'112%'",computed:!1}},showMenu:{required:!1,tsType:{name:"boolean"},description:"Whether to show the menu button",defaultValue:{value:"true",computed:!1}},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.MouseEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},name:"e"}],return:{name:"void"}}},description:"Click handler for the header"},onMenuClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.MouseEvent<HTMLButtonElement>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<HTMLButtonElement>",elements:[{name:"HTMLButtonElement"}]},name:"e"}],return:{name:"void"}}},description:"Click handler for the menu button"},onMouseEnter:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.MouseEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},name:"e"}],return:{name:"void"}}},description:"Mouse enter handler"},onMouseLeave:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.MouseEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},name:"e"}],return:{name:"void"}}},description:"Mouse leave handler"},clipStartTime:{required:!1,tsType:{name:"number"},description:"Clip start time in seconds (for calculating time selection overlay position)",defaultValue:{value:"0",computed:!1}},clipDuration:{required:!1,tsType:{name:"number"},description:"Clip duration in seconds (for calculating time selection overlay position)",defaultValue:{value:"0",computed:!1}},timeSelectionRange:{required:!1,tsType:{name:"union",raw:"{ startTime: number; endTime: number } | null",elements:[{name:"signature",type:"object",raw:"{ startTime: number; endTime: number }",signature:{properties:[{key:"startTime",value:{name:"number",required:!0}},{key:"endTime",value:{name:"number",required:!0}}]}},{name:"null"}]},description:"Time selection range (for calculating overlay position)",defaultValue:{value:"null",computed:!1}},pixelsPerSecond:{required:!1,tsType:{name:"number"},description:"Pixels per second (timeline zoom level)",defaultValue:{value:"100",computed:!1}}}};function Ne(e){let n,u,i;e<.5?(n=0,u=Math.floor(e*2*255),i=Math.floor(255-e*2*255)):(n=Math.floor((e-.5)*2*255),u=255,i=0);const l=Math.max(.3,e);return`rgba(${n}, ${u}, ${i}, ${l})`}function Ce(e,n,u,i,l,r,v={}){const{frequencyBands:d=256,fftWindowSize:x=2048,intensityMultiplier:p=1.5,pixelSkip:q=1}=v,y=n.length/l;for(let b=0;b<l;b+=q){const f=Math.floor(b*y);if(f>=n.length)break;const Q=We(n,f,x,d),K=Math.max(...Q,1e-4);for(let Y=0;Y<d;Y++){const z=Q[Y]/K,h=Math.min(1,Math.sqrt(z)*p);e.fillStyle=Ne(h);const g=i+(1-(Y+1)/d)*r,W=i+(1-Y/d)*r,M=Math.ceil(W-g);e.fillRect(u+b,g,q,M)}}}function kt(e,n,u,i,l,r,v,d=.5,x={}){const{frequencyBands:p=256,fftWindowSize:q=2048,intensityMultiplier:y=1.5,pixelSkip:b=1}=x,f=v*d,Q=v*(1-d),K=n.length/r;for(let h=0;h<r;h+=b){const g=Math.floor(h*K);if(g>=n.length)break;const W=We(n,g,q,p),M=Math.max(...W,1e-4);for(let ne=0;ne<p;ne++){const me=W[ne]/M,j=Math.min(1,Math.sqrt(me)*y);e.fillStyle=Ne(j);const H=l+(1-(ne+1)/p)*f,c=l+(1-ne/p)*f,T=Math.ceil(c-H);e.fillRect(i+h,H,b,T)}}const Y=l+f,z=u.length/r;for(let h=0;h<r;h+=b){const g=Math.floor(h*z);if(g>=u.length)break;const W=We(u,g,q,p),M=Math.max(...W,1e-4);for(let ne=0;ne<p;ne++){const me=W[ne]/M,j=Math.min(1,Math.sqrt(me)*y);e.fillStyle=Ne(j);const H=Y+(1-(ne+1)/p)*Q,c=Y+(1-ne/p)*Q,T=Math.ceil(c-H);e.fillRect(i+h,H,b,T)}}}const It=3;function ke(e,n,u){const r=u-It;if(e===-1/0)return n+r;const x=(Math.max(-60,Math.min(12,e))- -60)/72,p=Math.pow(x,3);return n+r-p*r}function we(e,n,u){if(!n||n.length===0)return 1;const i=Math.max(0,Math.min(u,e));let l=null,r=null;for(let d=0;d<n.length;d++){const x=n[d];x.time<=i&&(l=x),x.time>=i&&!r&&(r=x)}let v;if(!l&&!r)v=0;else if(!l)v=r.db;else if(!r)v=l.db;else if(l.time===r.time)v=l.db;else{const d=(i-l.time)/(r.time-l.time);v=l.db+d*(r.db-l.db)}return Math.pow(10,v/20)}const vt=({points:e,duration:n,width:u,height:i,yOffset:l=0,lineColor:r="#ffffff",pointColor:v="#ffffff",pointCenterColor:d="#000000",hiddenPointIndices:x=[],hoveredPointIndex:p=null,pointSizes:q={outerRadius:5,innerRadius:3,outerRadiusHover:6,innerRadiusHover:4}})=>{const y=e.filter((Y,z)=>!x.includes(z)),b=ke(0,0,i),f=()=>{if(y.length===0)return`M 0,${b} L ${u},${b}`;const Y=[],z=ke(y[0].db,0,i),h=y[0].time/n*u;Y.push(`M 0,${z}`),Y.push(`L ${h},${z}`);for(let W=0;W<y.length-1;W++){const M=y[W].time/n*u,ne=ke(y[W].db,0,i),me=y[W+1].time/n*u,j=ke(y[W+1].db,0,i);Y.push(`M ${M},${ne}`),Y.push(`L ${me},${j}`)}const g=y[y.length-1];if(g.time<n){const W=g.time/n*u,M=ke(g.db,0,i);Y.push(`M ${W},${M}`),Y.push(`L ${u},${M}`)}return Y.join(" ")},Q=y.length===2&&y[0].time===0&&Math.abs(y[1].time-n)<.001,K=y.length>0&&!Q;return w.jsxs("svg",{className:"envelope-overlay",style:{position:"absolute",top:l,left:0,width:u,height:i,pointerEvents:"none",zIndex:2},children:[w.jsx("path",{d:f(),stroke:r,strokeWidth:1.5,strokeLinecap:"butt",strokeLinejoin:"miter",fill:"none"}),K&&y.map((Y,z)=>{const h=Y.time/n*u,g=ke(Y.db,0,i),W=p===z,M=W?q.outerRadiusHover:q.outerRadius,ne=W?q.innerRadiusHover:q.innerRadius;return w.jsxs("g",{className:`envelope-point ${W?"envelope-point--hovered":""}`,children:[w.jsx("circle",{cx:h,cy:g,r:M,fill:v}),w.jsx("circle",{cx:h,cy:g,r:ne,fill:d})]},z)})]})};vt.__docgenInfo={description:`EnvelopeOverlay - SVG-based envelope rendering

Renders the envelope curve and control points as SVG for crisp,
resolution-independent rendering at all zoom levels.`,methods:[],displayName:"EnvelopeOverlay",props:{points:{required:!0,tsType:{name:"Array",elements:[{name:"EnvelopePointData"}],raw:"EnvelopePointData[]"},description:"Envelope points"},duration:{required:!0,tsType:{name:"number"},description:"Clip duration in seconds"},width:{required:!0,tsType:{name:"number"},description:"Width in pixels"},height:{required:!0,tsType:{name:"number"},description:"Height in pixels"},yOffset:{required:!1,tsType:{name:"number"},description:"Y offset for split view mode",defaultValue:{value:"0",computed:!1}},lineColor:{required:!1,tsType:{name:"string"},description:"Line color",defaultValue:{value:"'#ffffff'",computed:!1}},pointColor:{required:!1,tsType:{name:"string"},description:"Point outer color",defaultValue:{value:"'#ffffff'",computed:!1}},pointCenterColor:{required:!1,tsType:{name:"string"},description:"Point center color",defaultValue:{value:"'#000000'",computed:!1}},hiddenPointIndices:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:"Indices of hidden points (during drag)",defaultValue:{value:"[]",computed:!1}},hoveredPointIndex:{required:!1,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:"Index of hovered point",defaultValue:{value:"null",computed:!1}},pointSizes:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  outerRadius: number;
  innerRadius: number;
  outerRadiusHover: number;
  innerRadiusHover: number;
}`,signature:{properties:[{key:"outerRadius",value:{name:"number",required:!0}},{key:"innerRadius",value:{name:"number",required:!0}},{key:"outerRadiusHover",value:{name:"number",required:!0}},{key:"innerRadiusHover",value:{name:"number",required:!0}}]}},description:"Point sizes",defaultValue:{value:`{
  outerRadius: 5,    // 10px diameter (AU4 style)
  innerRadius: 3,    // Creates 2px visual stroke/ring
  outerRadiusHover: 6,
  innerRadiusHover: 4,
}`,computed:!1}}}};const ht=({color:e="blue",selected:n=!1,variant:u="waveform",channelMode:i="mono",width:l,height:r=84,waveformSrc:v,waveformData:d,waveformDataRms:x,waveformLeft:p,waveformRight:q,waveformLeftRms:y,waveformRightRms:b,envelope:f,showEnvelope:Q=!1,channelSplitRatio:K=.5,timeSelection:Y=null,clipStartTime:z=0,clipDuration:h=1,clipTrimStart:g=0,clipFullDuration:W,pixelsPerSecond:M=100,timeSelectionColor:ne="rgba(255, 255, 255, 0.3)",hiddenPointIndices:me=[],hoveredPointIndex:j=null,inTimeSelection:H=!1,timeSelectionRange:c=null,envelopePointSizes:T})=>{const X=xe.useRef(null),{theme:U}=yt();xe.useEffect(()=>{const I=X.current;if(!I)return;const O=p&&q,se=d&&d.length>0;if(!O&&!se)return;const a=I.getContext("2d",{alpha:!0});if(!a)return;const D=getComputedStyle(I),A=l||I.offsetWidth,B=r,pe=window.devicePixelRatio||1;if(I.width=A*pe,I.height=B*pe,I.style.width=`${A}px`,I.style.height=`${B}px`,a.scale(pe,pe),a.clearRect(0,0,A,B),H&&c){const _=z+h,ee=Math.max(z,c.startTime),oe=Math.min(_,c.endTime);if(ee<oe){const J=(ee-z)*M,ue=(oe-ee)*M,fe=D.getPropertyValue(`--clip-${e}-time-selection-body`).trim();a.fillStyle=fe,a.fillRect(J,0,ue,B)}}if(i==="split-mono"||i==="split-stereo"){const _=B*K,ee=B*(1-K),oe=_,J=D.getPropertyValue("--spectrogram-background").trim();if(a.fillStyle=J,a.fillRect(0,0,A,_),a.save(),a.beginPath(),a.rect(0,0,A,_),a.clip(),i==="split-stereo"&&O){const ae=_/2,ye={frequencyBands:16,fftWindowSize:64,intensityMultiplier:1.5,pixelSkip:4};Ce(a,p,0,0,A,ae,ye);const s=D.getPropertyValue(`--clip-${e}-divider`).trim();a.strokeStyle=s,a.lineWidth=1,a.beginPath(),a.moveTo(0,ae),a.lineTo(A,ae),a.stroke(),Ce(a,q,0,ae,A,ae,ye)}else se&&Ce(a,d,0,0,A,_,{frequencyBands:16,fftWindowSize:64,intensityMultiplier:1.5,pixelSkip:4});a.restore();const ue=D.getPropertyValue("--split-separator").trim();a.strokeStyle=ue,a.lineWidth=1,a.beginPath(),a.moveTo(0,oe),a.lineTo(A,oe),a.stroke();const Te=D.getPropertyValue(`--clip-${e}-waveform`).trim();if(a.fillStyle=Te,a.strokeStyle=Te,a.lineWidth=1,i==="split-stereo"&&O){const ae=ee/2,ye=oe+ae/2,s=oe+ae+ae/2,S=ae/2*.9,de=W||g+h,re=p.length/de,C=1/M*re,E=Math.floor(g*re);for(let $=0;$<A;$++){const o=E+Math.floor($*C),P=E+Math.floor(($+1)*C);let N=p[o]||0,m=p[o]||0;for(let V=o;V<P&&V<p.length;V++){const F=p[V];N=Math.min(N,F),m=Math.max(m,F)}const G=g+$/M,t=Q&&f?we(G,f,h):1;N*=t,m*=t;const L=ye-m*S,ge=ye-N*S;a.fillRect($,L,1,Math.max(1,ge-L))}if(y&&y.length>0){const $=D.getPropertyValue(`--clip-${e}-waveform-rms`).trim();a.fillStyle=$;for(let o=0;o<A;o++){const P=E+Math.floor(o*C),N=E+Math.floor((o+1)*C);y[P];let m=y[P]||0;for(let V=P;V<N&&V<y.length;V++){const F=y[V];m=Math.max(m,F)}const G=g+o/M,t=f?we(G,f,h):1;m*=t;const L=ye-m*S,ge=ye+m*S;a.fillRect(o,L,1,Math.max(1,ge-L))}}const te=D.getPropertyValue(`--clip-${e}-divider`).trim();a.strokeStyle=te,a.lineWidth=1,a.beginPath(),a.moveTo(0,oe+ae),a.lineTo(A,oe+ae),a.stroke(),a.fillStyle=Te;for(let $=0;$<A;$++){const o=E+Math.floor($*C),P=E+Math.floor(($+1)*C);let N=q[o]||0,m=q[o]||0;for(let V=o;V<P&&V<q.length;V++){const F=q[V];N=Math.min(N,F),m=Math.max(m,F)}const G=g+$/M,t=Q&&f?we(G,f,h):1;N*=t,m*=t;const L=s-m*S,ge=s-N*S;a.fillRect($,L,1,Math.max(1,ge-L))}if(b&&b.length>0){const $=D.getPropertyValue(`--clip-${e}-waveform-rms`).trim();a.fillStyle=$;for(let o=0;o<A;o++){const P=E+Math.floor(o*C),N=E+Math.floor((o+1)*C);b[P];let m=b[P]||0;for(let V=P;V<N&&V<b.length;V++){const F=b[V];m=Math.max(m,F)}const G=g+o/M,t=f?we(G,f,h):1;m*=t;const L=s-m*S,ge=s+m*S;a.fillRect(o,L,1,Math.max(1,ge-L))}}}else if(se){const ae=oe+ee/2,ye=ee/2*.9,s=W||g+h,S=d.length/s,re=1/M*S,R=Math.floor(g*S);for(let C=0;C<A;C++){const E=R+Math.floor(C*re),te=R+Math.floor((C+1)*re);let $=d[E]||0,o=d[E]||0;for(let t=E;t<te&&t<d.length;t++){const L=d[t];$=Math.min($,L),o=Math.max(o,L)}const P=g+C/M,N=Q&&f?we(P,f,h):1;$*=N,o*=N;const m=ae-o*ye,G=ae-$*ye;a.fillRect(C,m,1,Math.max(1,G-m))}if(x&&x.length>0){const C=D.getPropertyValue(`--clip-${e}-waveform-rms`).trim();a.fillStyle=C;for(let E=0;E<A;E++){const te=R+Math.floor(E*re),$=R+Math.floor((E+1)*re);x[te];let o=x[te]||0;for(let t=te;t<$&&t<x.length;t++){const L=x[t];o=Math.max(o,L)}const P=g+E/M,N=f?we(P,f,h):1;o*=N;const m=ae-o*ye,G=ae+o*ye;a.fillRect(E,m,1,Math.max(1,G-m))}}}}else if(u==="spectrogram"){const _={frequencyBands:32,fftWindowSize:256,intensityMultiplier:1.5,pixelSkip:4};if(O){kt(a,p,q,0,0,A,B,K,_);const ee=B*K,oe=D.getPropertyValue(`--clip-${e}-divider`).trim();a.strokeStyle=oe,a.lineWidth=1,a.beginPath(),a.moveTo(0,ee),a.lineTo(A,ee),a.stroke()}else se&&Ce(a,d,0,0,A,B,_)}else if(a.lineWidth=1,O){const _=B*K,ee=B*(1-K),oe=_/2,J=_+ee/2,ue=_/2-2,fe=ee/2-2,Te=W||g+h,ae=p.length/Te,s=1/M*ae,S=Math.floor(g*ae);let de=-1,re=-1;if(H&&c){const o=z+h,P=Math.max(z,c.startTime),N=Math.min(o,c.endTime);P<N&&(de=(P-z)*M,re=(N-z)*M)}const R=D.getPropertyValue(`--clip-${e}-waveform`).trim();D.getPropertyValue(`--clip-${e}-waveform-selected`).trim();const C=D.getPropertyValue(`--clip-${e}-time-selection-waveform`).trim(),E=D.getPropertyValue(`--clip-${e}-waveform-rms`).trim();D.getPropertyValue(`--clip-${e}-waveform-rms-selected`).trim();const te=D.getPropertyValue(`--clip-${e}-time-selection-waveform-rms`).trim();for(let o=0;o<A;o++){const P=S+Math.floor(o*s),N=S+Math.floor((o+1)*s);let m=p[P]||0,G=p[P]||0;for(let he=P;he<N&&he<p.length;he++){const qe=p[he];m=Math.min(m,qe),G=Math.max(G,qe)}const t=g+o/M,L=f?we(t,f,h):1;m*=L,G*=L;const V=o>=de&&o<re?C:R;a.fillStyle=V;const F=oe-G*ue,ie=oe-m*ue;a.fillRect(o,F,1,Math.max(1,ie-F))}if(y&&y.length>0)for(let o=0;o<A;o++){const P=S+Math.floor(o*s),N=S+Math.floor((o+1)*s);y[P];let m=y[P]||0;for(let ie=P;ie<N&&ie<y.length;ie++){const he=y[ie];m=Math.max(m,he)}const G=g+o/M,t=f?we(G,f,h):1;m*=t;const ge=o>=de&&o<re?te:E;a.fillStyle=ge;const V=oe-m*ue,F=oe+m*ue;a.fillRect(o,V,1,Math.max(1,F-V))}const $=D.getPropertyValue(`--clip-${e}-divider`).trim();a.strokeStyle=$,a.lineWidth=1,a.beginPath(),a.moveTo(0,_),a.lineTo(A,_),a.stroke();for(let o=0;o<A;o++){const P=S+Math.floor(o*s),N=S+Math.floor((o+1)*s);let m=q[P]||0,G=q[P]||0;for(let he=P;he<N&&he<q.length;he++){const qe=q[he];m=Math.min(m,qe),G=Math.max(G,qe)}const t=g+o/M,L=f?we(t,f,h):1;m*=L,G*=L;const V=o>=de&&o<re?C:R;a.fillStyle=V;const F=J-G*fe,ie=J-m*fe;a.fillRect(o,F,1,Math.max(1,ie-F))}if(b&&b.length>0)for(let o=0;o<A;o++){const P=S+Math.floor(o*s),N=S+Math.floor((o+1)*s);b[P];let m=b[P]||0;for(let ie=P;ie<N&&ie<b.length;ie++){const he=b[ie];m=Math.max(m,he)}const G=g+o/M,t=f?we(G,f,h):1;m*=t;const ge=o>=de&&o<re?te:E;a.fillStyle=ge;const V=J-m*fe,F=J+m*fe;a.fillRect(o,V,1,Math.max(1,F-V))}}else if(se){const _=B/2,ee=B/2-2,oe=W||g+h,J=d.length/oe,fe=1/M*J,Te=Math.floor(g*J);let ae=-1,ye=-1;if(H&&c){const R=z+h,C=Math.max(z,c.startTime),E=Math.min(R,c.endTime);C<E&&(ae=(C-z)*M,ye=(E-z)*M)}const s=D.getPropertyValue(`--clip-${e}-waveform`).trim();D.getPropertyValue(`--clip-${e}-waveform-selected`).trim();const S=D.getPropertyValue(`--clip-${e}-time-selection-waveform`).trim(),de=D.getPropertyValue(`--clip-${e}-waveform-rms`).trim();D.getPropertyValue(`--clip-${e}-waveform-rms-selected`).trim();const re=D.getPropertyValue(`--clip-${e}-time-selection-waveform-rms`).trim();for(let R=0;R<A;R++){const C=Te+Math.floor(R*fe),E=Te+Math.floor((R+1)*fe);let te=d[C]||0,$=d[C]||0;for(let L=C;L<E&&L<d.length;L++){const ge=d[L];te=Math.min(te,ge),$=Math.max($,ge)}const o=g+R/M,P=f?we(o,f,h):1;te*=P,$*=P;const m=R>=ae&&R<ye?S:s;a.fillStyle=m;const G=_-$*ee,t=_-te*ee;a.fillRect(R,G,1,Math.max(1,t-G))}if(x&&x.length>0)for(let R=0;R<A;R++){const C=Te+Math.floor(R*fe),E=Te+Math.floor((R+1)*fe);x[C];let te=x[C]||0;for(let t=C;t<E&&t<x.length;t++){const L=x[t];te=Math.max(te,L)}const $=g+R/M,o=f?we($,f,h):1;te*=o;const N=R>=ae&&R<ye?re:de;a.fillStyle=N;const m=_-te*ee,G=_+te*ee;a.fillRect(R,m,1,Math.max(1,G-m))}}},[d,p,q,l,r,u,K,e,f,Q,i,h,g,W,M,H,c,z,U]);const k=["clip-body",`clip-body--${e}`,`clip-body--${u}`,`clip-body--${i}`,n&&"clip-body--selected",Q&&f&&"clip-body--has-envelope",H&&"clip-body--time-selected"].filter(Boolean).join(" "),ce={height:`${r}px`,...l&&{width:`${l}px`}},ve=i==="split-mono"||i==="split-stereo"?r*K:0,Z=i==="split-mono"||i==="split-stereo"?r*(1-K):r;return w.jsxs("div",{className:k,style:ce,"data-color":e,"data-variant":u,"data-channel-mode":i,"data-selected":n,children:[(d||p&&q)&&w.jsx("canvas",{ref:X,className:"clip-body__waveform",style:{display:"block",background:"transparent"}}),!d&&!p&&!q&&v&&w.jsx("img",{src:v,alt:"",className:"clip-body__waveform"}),Q&&w.jsx(vt,{points:f||[],duration:h,width:l||0,height:Z,yOffset:ve,lineColor:U.audio.envelope.line,pointColor:U.audio.envelope.point,pointCenterColor:U.audio.envelope.pointCenter,hiddenPointIndices:me,hoveredPointIndex:j,pointSizes:T})]})},qt=le.memo(ht);ht.__docgenInfo={description:`ClipBody - The body/content area of an audio clip

Supports multiple visualization modes:
- Waveform (mono/stereo/split)
- Spectrogram (mono/stereo)
- Envelope overlay for automation`,methods:[],displayName:"ClipBodyComponent",props:{color:{required:!1,tsType:{name:"union",raw:"'cyan' | 'blue' | 'violet' | 'magenta' | 'red' | 'orange' | 'yellow' | 'green' | 'teal' | 'classic'",elements:[{name:"literal",value:"'cyan'"},{name:"literal",value:"'blue'"},{name:"literal",value:"'violet'"},{name:"literal",value:"'magenta'"},{name:"literal",value:"'red'"},{name:"literal",value:"'orange'"},{name:"literal",value:"'yellow'"},{name:"literal",value:"'green'"},{name:"literal",value:"'teal'"},{name:"literal",value:"'classic'"}]},description:"Clip color from the 9-color palette",defaultValue:{value:"'blue'",computed:!1}},selected:{required:!1,tsType:{name:"boolean"},description:"Whether the clip is selected",defaultValue:{value:"false",computed:!1}},variant:{required:!1,tsType:{name:"union",raw:"'waveform' | 'spectrogram'",elements:[{name:"literal",value:"'waveform'"},{name:"literal",value:"'spectrogram'"}]},description:"Visualization type",defaultValue:{value:"'waveform'",computed:!1}},channelMode:{required:!1,tsType:{name:"union",raw:"'mono' | 'stereo' | 'split-mono' | 'split-stereo'",elements:[{name:"literal",value:"'mono'"},{name:"literal",value:"'stereo'"},{name:"literal",value:"'split-mono'"},{name:"literal",value:"'split-stereo'"}]},description:"Channel display mode",defaultValue:{value:"'mono'",computed:!1}},width:{required:!1,tsType:{name:"number"},description:"Width in pixels"},height:{required:!1,tsType:{name:"number"},description:"Height in pixels",defaultValue:{value:"84",computed:!1}},waveformSrc:{required:!1,tsType:{name:"string"},description:"Waveform image URL (for static display)"},waveformData:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:"Waveform data array (normalized -1 to 1) - for mono"},waveformDataRms:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:"RMS waveform data (normalized -1 to 1) - for mono"},waveformLeft:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:"Left channel waveform data (for stereo)"},waveformRight:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:"Right channel waveform data (for stereo)"},waveformLeftRms:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:"Left channel RMS waveform data (for stereo)"},waveformRightRms:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:"Right channel RMS waveform data (for stereo)"},envelope:{required:!1,tsType:{name:"Array",elements:[{name:"EnvelopePointData"}],raw:"EnvelopePointData[]"},description:"Envelope points for automation curve"},showEnvelope:{required:!1,tsType:{name:"boolean"},description:"Whether to show the envelope overlay",defaultValue:{value:"false",computed:!1}},channelSplitRatio:{required:!1,tsType:{name:"number"},description:"Split ratio for stereo channels (0-1, default 0.5 for 50/50)",defaultValue:{value:"0.5",computed:!1}},timeSelection:{required:!1,tsType:{name:"union",raw:"TimeSelection | null",elements:[{name:"TimeSelection"},{name:"null"}]},description:"Time selection range (for marquee selection overlay)",defaultValue:{value:"null",computed:!1}},clipStartTime:{required:!1,tsType:{name:"number"},description:"Clip start time in seconds (needed for time selection positioning)",defaultValue:{value:"0",computed:!1}},clipDuration:{required:!1,tsType:{name:"number"},description:"Clip duration in seconds (needed for time selection and envelope positioning)",defaultValue:{value:"1.0",computed:!1}},clipTrimStart:{required:!1,tsType:{name:"number"},description:"Trim start offset in seconds (for rendering only visible portion of waveform)",defaultValue:{value:"0",computed:!1}},clipFullDuration:{required:!1,tsType:{name:"number"},description:"Full duration of original audio before trimming (for waveform sample rate detection)"},pixelsPerSecond:{required:!1,tsType:{name:"number"},description:"Pixels per second (timeline zoom level) - for maintaining constant waveform scale",defaultValue:{value:"100",computed:!1}},timeSelectionColor:{required:!1,tsType:{name:"string"},description:"Time selection overlay color (default: 'rgba(255, 255, 255, 0.3)')",defaultValue:{value:"'rgba(255, 255, 255, 0.3)'",computed:!1}},hiddenPointIndices:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:"Points to hide during drag (eating behavior)",defaultValue:{value:"[]",computed:!1}},hoveredPointIndex:{required:!1,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:"Index of point being hovered (for hover visual feedback)",defaultValue:{value:"null",computed:!1}},inTimeSelection:{required:!1,tsType:{name:"boolean"},description:"Whether clip is within a time selection (for vibrant color rendering)",defaultValue:{value:"false",computed:!1}},timeSelectionRange:{required:!1,tsType:{name:"union",raw:"{ startTime: number; endTime: number } | null",elements:[{name:"signature",type:"object",raw:"{ startTime: number; endTime: number }",signature:{properties:[{key:"startTime",value:{name:"number",required:!0}},{key:"endTime",value:{name:"number",required:!0}}]}},{name:"null"}]},description:"Time selection range (for calculating overlay position)",defaultValue:{value:"null",computed:!1}},envelopePointSizes:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  outerRadius: number;
  innerRadius: number;
  outerRadiusHover: number;
  innerRadiusHover: number;
}`,signature:{properties:[{key:"outerRadius",value:{name:"number",required:!0}},{key:"innerRadius",value:{name:"number",required:!0}},{key:"outerRadiusHover",value:{name:"number",required:!0}},{key:"innerRadiusHover",value:{name:"number",required:!0}}]}},description:"Envelope control point sizes (for MuseScore vs AU4 style)"}}};const Et=44,St=20,bt=({color:e="blue",selected:n=!1,state:u="default",name:i="Clip",width:l=224,height:r=104,variant:v="waveform",channelMode:d="mono",waveformSrc:x,waveformData:p,waveformDataRms:q,waveformLeft:y,waveformRight:b,waveformLeftRms:f,waveformRightRms:Q,channelSplitRatio:K=.5,envelope:Y,showEnvelope:z=!1,clipDuration:h,clipTrimStart:g=0,clipFullDuration:W,pixelsPerSecond:M=100,hiddenPointIndices:ne=[],hoveredPointIndex:me=null,onHeaderClick:j,onMenuClick:H,onTrimEdge:c,inTimeSelection:T=!1,clipStartTime:X=0,timeSelectionRange:U=null,envelopePointSizes:k,isRecording:ce=!1})=>{const[ve,Z]=xe.useState(!1),[I,O]=xe.useState(!1),[se,a]=xe.useState(null),D=r<=Et,A=!D||ve,B=["clip-display",n&&"clip-display--selected",D&&"clip-display--truncated",D&&ve&&"clip-display--truncated-hover",ce&&"clip-display--recording"].filter(Boolean).join(" "),pe=D?r:r-St,_=6,ee=J=>ue=>{c&&(ue.stopPropagation(),a(J))},oe=J=>{if(!c||se)return;const ue=J.currentTarget.getBoundingClientRect(),fe=J.clientX-ue.left;fe<_||fe>l-_?J.currentTarget.style.cursor="ew-resize":J.currentTarget.style.cursor=""};return le.useEffect(()=>{if(!se)return;const J=fe=>{c==null||c({edge:se,clientX:fe.clientX})},ue=()=>{a(null)};return document.addEventListener("mousemove",J),document.addEventListener("mouseup",ue),()=>{document.removeEventListener("mousemove",J),document.removeEventListener("mouseup",ue)}},[se,c]),w.jsxs("div",{className:B,style:{width:`${l}px`,height:`${r}px`,position:"relative"},"data-color":e,"data-state":u,"data-selected":n,onMouseEnter:()=>Z(!0),onMouseLeave:()=>Z(!1),onMouseMove:oe,children:[A&&w.jsx("div",{style:D?{position:"absolute",top:0,left:0,right:0,zIndex:10}:void 0,onMouseEnter:()=>O(!0),onMouseLeave:()=>O(!1),children:w.jsx(gt,{color:e,selected:n,inTimeSelection:T,state:I?"hover":"default",name:i,width:l,showMenu:!ce,clipStartTime:X,clipDuration:h,timeSelectionRange:U,pixelsPerSecond:M,onClick:J=>{J.stopPropagation(),j==null||j(J.shiftKey)},onMenuClick:J=>{J.stopPropagation();const ue=J.currentTarget.getBoundingClientRect();H==null||H(ue.right,ue.bottom)}})}),w.jsx(qt,{color:e,selected:n,variant:v,channelMode:d,width:l,height:pe,waveformSrc:x,waveformData:p,waveformDataRms:q,waveformLeft:y,waveformRight:b,waveformLeftRms:f,waveformRightRms:Q,channelSplitRatio:K,envelope:Y,showEnvelope:z,clipDuration:h,clipTrimStart:g,clipFullDuration:W,pixelsPerSecond:M,hiddenPointIndices:ne,hoveredPointIndex:me,inTimeSelection:T,clipStartTime:X,timeSelectionRange:U,envelopePointSizes:k}),c&&w.jsxs(w.Fragment,{children:[w.jsx("div",{onMouseDown:ee("left"),style:{position:"absolute",left:0,top:0,width:`${_}px`,height:"100%",cursor:"ew-resize",zIndex:20}}),w.jsx("div",{onMouseDown:ee("right"),style:{position:"absolute",right:0,top:0,width:`${_}px`,height:"100%",cursor:"ew-resize",zIndex:20}})]})]})};bt.__docgenInfo={description:`Clip - A visual representation of an audio clip

This component displays a simplified clip with header and body areas,
using the Audacity 9-color clip palette. Composed of ClipHeader and ClipBody.

When height ≤ 44px, enters "truncated" mode where header is hidden until hover.`,methods:[],displayName:"Clip",props:{color:{required:!1,tsType:{name:"union",raw:"'cyan' | 'blue' | 'violet' | 'magenta' | 'red' | 'orange' | 'yellow' | 'green' | 'teal' | 'classic'",elements:[{name:"literal",value:"'cyan'"},{name:"literal",value:"'blue'"},{name:"literal",value:"'violet'"},{name:"literal",value:"'magenta'"},{name:"literal",value:"'red'"},{name:"literal",value:"'orange'"},{name:"literal",value:"'yellow'"},{name:"literal",value:"'green'"},{name:"literal",value:"'teal'"},{name:"literal",value:"'classic'"}]},description:"Clip color from the 9-color palette",defaultValue:{value:"'blue'",computed:!1}},selected:{required:!1,tsType:{name:"boolean"},description:"Whether the clip is selected",defaultValue:{value:"false",computed:!1}},state:{required:!1,tsType:{name:"union",raw:"'default' | 'headerHover'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'headerHover'"}]},description:"Interaction state",defaultValue:{value:"'default'",computed:!1}},name:{required:!1,tsType:{name:"string"},description:"Clip name to display in header",defaultValue:{value:"'Clip'",computed:!1}},width:{required:!1,tsType:{name:"number"},description:"Width in pixels",defaultValue:{value:"224",computed:!1}},height:{required:!1,tsType:{name:"number"},description:"Height in pixels",defaultValue:{value:"104",computed:!1}},variant:{required:!1,tsType:{name:"union",raw:"'waveform' | 'spectrogram'",elements:[{name:"literal",value:"'waveform'"},{name:"literal",value:"'spectrogram'"}]},description:"Visualization type",defaultValue:{value:"'waveform'",computed:!1}},channelMode:{required:!1,tsType:{name:"union",raw:"'mono' | 'stereo' | 'split-mono' | 'split-stereo'",elements:[{name:"literal",value:"'mono'"},{name:"literal",value:"'stereo'"},{name:"literal",value:"'split-mono'"},{name:"literal",value:"'split-stereo'"}]},description:"Channel display mode",defaultValue:{value:"'mono'",computed:!1}},waveformSrc:{required:!1,tsType:{name:"string"},description:"Waveform image URL (optional)"},waveformData:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:"Waveform data array (normalized -1 to 1) - for mono"},waveformDataRms:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:"RMS waveform data (normalized -1 to 1) - for mono"},waveformLeft:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:"Left channel waveform data (for stereo)"},waveformRight:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:"Right channel waveform data (for stereo)"},waveformLeftRms:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:"Left channel RMS waveform data (for stereo)"},waveformRightRms:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:"Right channel RMS waveform data (for stereo)"},channelSplitRatio:{required:!1,tsType:{name:"number"},description:"Split ratio for stereo channels (0-1, default 0.5 for 50/50)",defaultValue:{value:"0.5",computed:!1}},envelope:{required:!1,tsType:{name:"Array",elements:[{name:"EnvelopePointData"}],raw:"EnvelopePointData[]"},description:"Envelope points for automation curve"},showEnvelope:{required:!1,tsType:{name:"boolean"},description:"Whether to show the envelope overlay",defaultValue:{value:"false",computed:!1}},clipDuration:{required:!1,tsType:{name:"number"},description:"Clip duration in seconds (needed for envelope rendering)"},clipTrimStart:{required:!1,tsType:{name:"number"},description:"Trim start offset in seconds (for trimmed clips)",defaultValue:{value:"0",computed:!1}},clipFullDuration:{required:!1,tsType:{name:"number"},description:"Full duration of original audio before trimming"},pixelsPerSecond:{required:!1,tsType:{name:"number"},description:"Pixels per second (timeline zoom level)",defaultValue:{value:"100",computed:!1}},hiddenPointIndices:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:"Points to hide during drag (eating behavior)",defaultValue:{value:"[]",computed:!1}},hoveredPointIndex:{required:!1,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:"Index of point being hovered (for hover visual feedback)",defaultValue:{value:"null",computed:!1}},onHeaderClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(shiftKey: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"shiftKey"}],return:{name:"void"}}},description:"Callback when clip header is clicked"},onMenuClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(x: number, y: number) => void",signature:{arguments:[{type:{name:"number"},name:"x"},{type:{name:"number"},name:"y"}],return:{name:"void"}}},description:"Callback when clip menu button is clicked"},onTrimEdge:{required:!1,tsType:{name:"signature",type:"function",raw:"(params: { edge: 'left' | 'right'; clientX: number }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ edge: 'left' | 'right'; clientX: number }",signature:{properties:[{key:"edge",value:{name:"union",raw:"'left' | 'right'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'right'"}],required:!0}},{key:"clientX",value:{name:"number",required:!0}}]}},name:"params"}],return:{name:"void"}}},description:"Callback when dragging left or right edge to trim clip"},inTimeSelection:{required:!1,tsType:{name:"boolean"},description:"Whether clip is within a time selection (for vibrant color rendering)",defaultValue:{value:"false",computed:!1}},clipStartTime:{required:!1,tsType:{name:"number"},description:"Clip start time in seconds (for calculating time selection overlay position)",defaultValue:{value:"0",computed:!1}},timeSelectionRange:{required:!1,tsType:{name:"union",raw:"{ startTime: number; endTime: number } | null",elements:[{name:"signature",type:"object",raw:"{ startTime: number; endTime: number }",signature:{properties:[{key:"startTime",value:{name:"number",required:!0}},{key:"endTime",value:{name:"number",required:!0}}]}},{name:"null"}]},description:"Time selection range (for calculating overlay position)",defaultValue:{value:"null",computed:!1}},envelopePointSizes:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  outerRadius: number;
  innerRadius: number;
  outerRadiusHover: number;
  innerRadiusHover: number;
}`,signature:{properties:[{key:"outerRadius",value:{name:"number",required:!0}},{key:"innerRadius",value:{name:"number",required:!0}},{key:"outerRadiusHover",value:{name:"number",required:!0}},{key:"innerRadiusHover",value:{name:"number",required:!0}}]}},description:"Envelope control point sizes (for MuseScore vs AU4 style)"},isRecording:{required:!1,tsType:{name:"boolean"},description:"Whether this clip is currently being recorded (shows menu, removes right border radius)",defaultValue:{value:"false",computed:!1}}}};const Ct=({content:e,x:n,y:u,visible:i=!0,offset:l=8})=>{if(!i)return null;const r=w.jsxs("div",{className:"tooltip",style:{left:`${n}px`,top:`${u-l}px`},children:[w.jsx("div",{className:"tooltip__content",children:e}),w.jsx("div",{className:"tooltip__arrow",children:w.jsx("svg",{width:"16",height:"7",viewBox:"0 0 16 7",fill:"none",children:w.jsx("path",{d:"M1 6.5L8 1L15 6.5",stroke:"#D4D5D9",strokeWidth:"1",fill:"#F8F8F9",strokeLinejoin:"miter"})})})]});return Tt.createPortal(r,document.body)},De=10,Le=4,Pt=.05,Ee=.001,Be=3;function be(e,n){const r=n-3;if(e===-1/0)return r;const x=(Math.max(-60,Math.min(12,e))- -60)/72,p=Math.pow(x,3);return r-p*r}function Se(e,n){const r=n-3;if(e>=r)return-1/0;const v=(r-e)/r;return-60+Math.pow(v,1/3)*72}function Oe(e,n,u,i,l,r){const v=e-u,d=n-i,x=l-u,p=r-i,q=v*x+d*p,y=x*x+p*p;let b=-1;y!==0&&(b=q/y);let f,Q;b<0?(f=u,Q=i):b>1?(f=l,Q=r):(f=u+b*x,Q=i+b*p);const K=e-f,Y=n-Q;return Math.sqrt(K*K+Y*Y)}const xt=({envelopePoints:e,onEnvelopePointsChange:n,onHiddenPointsChange:u,onHoveredPointChange:i,enabled:l=!0,width:r,height:v,duration:d,x=0,y:p=0,hiddenPointIndices:q=[]})=>{const y=xe.useRef(null),b=xe.useRef(null),[f,Q]=xe.useState([]),[K,Y]=xe.useState(null),[z,h]=xe.useState(!1),g=(j,H)=>{for(let T=0;T<e.length;T++){const X=e[T],U=X.time/d*r,k=be(X.db,v);if(Math.sqrt((j-U)**2+(H-k)**2)<=De)return!0}const c=Ye(e,r,v,d);for(let T=0;T<c.length;T++){const X=c[T];if(Oe(j,H,X.x1,X.y1,X.x2,X.y2)<=Le)return!0}return!1},W=j=>{var ve,Z;if(!l||!y.current)return;const H=y.current.getBoundingClientRect(),c=j.clientX-H.left,T=j.clientY-H.top;if(!g(c,T))return;j.stopPropagation();for(let I=0;I<e.length;I++){const O=e[I],se=O.time/d*r,a=be(O.db,v);if(Math.sqrt((c-se)**2+(T-a)**2)<=De){b.current={type:"point",pointIndex:I,startX:c,startY:T,originalTime:O.time,hasMoved:!1,hiddenIndices:[]};return}}const U=Ye(e,r,v,d);let k=1/0,ce=-1;for(let I=0;I<U.length;I++){const O=U[I],se=Oe(c,T,O.x1,O.y1,O.x2,O.y2);se<k&&(k=se,ce=I)}if(k<=Le){const{segmentStartIndex:I,segmentEndIndex:O}=Vt(e,ce);b.current={type:"segment",segmentStartIndex:I!==-1?I:void 0,segmentEndIndex:O!==-1?O:void 0,startX:c,startY:T,startDb1:I!==-1?(ve=e[I])==null?void 0:ve.db:void 0,startDb2:O!==-1?(Z=e[O])==null?void 0:Z.db:void 0,hasMoved:!1,hiddenIndices:[]}}};xe.useEffect(()=>{const j=c=>{if(!b.current||!y.current)return;const T=y.current.getBoundingClientRect(),X=c.clientX-T.left;let U=c.clientY-T.top;U=Math.max(0,Math.min(v,U));const k=b.current,ce=Math.abs(X-k.startX),ve=Math.abs(U-k.startY);if((ce>Be||ve>Be)&&(k.hasMoved=!0),k.type==="point"&&k.pointIndex!==void 0){let Z=Math.max(0,Math.min(d,X/r*d));const I=Se(U,v),O=Z/d*r,se=be(I,v);Y({x:T.left+O,y:T.top+se,db:I});for(let B=0;B<e.length;B++){if(B===k.pointIndex)continue;const pe=e[B];if(Math.abs(Z-pe.time)<Pt){Z=pe.time;break}}const a=[];if(Z<Ee)for(let B=0;B<e.length;B++)B!==k.pointIndex&&a.push(B);else{const B=Math.min(k.originalTime,Z),pe=Math.max(k.originalTime,Z);for(let _=0;_<e.length;_++){if(_===k.pointIndex)continue;const ee=e[_];ee.time>B&&ee.time<pe&&a.push(_)}}k.hiddenIndices=a,Q(a),u==null||u(a);const D=[...e];D[k.pointIndex]={time:Z,db:I===-1/0?-1/0:Math.max(-60,Math.min(12,I))},D.sort((B,pe)=>B.time-pe.time);const A=D.findIndex(B=>B.time===Z&&Math.abs(B.db-Math.max(-60,Math.min(12,I)))<.001);A!==-1&&(k.pointIndex=A),n(D)}else if(k.type==="segment"){const Z=Se(U,v)-Se(k.startY,v);if(k.segmentStartIndex!==void 0){const I=Math.max(-60,Math.min(12,k.startDb1+Z)),O=Math.max(-60,Math.min(12,k.startDb2+Z)),se=e[k.segmentStartIndex],a=e[k.segmentEndIndex],D=(se.time+a.time)/2,A=(I+O)/2,B=D/d*r,pe=be(A,v);Y({x:T.left+B,y:T.top+pe,db:A});const _=[...e];_[k.segmentStartIndex]={..._[k.segmentStartIndex],db:I},k.segmentStartIndex!==k.segmentEndIndex&&(_[k.segmentEndIndex]={..._[k.segmentEndIndex],db:O}),n(_)}else if(e.length===0||e.length===2&&e[0].time===0&&Math.abs(e[1].time-d)<Ee){const I=Math.max(-60,Math.min(12,0+Z)),O=be(I,v);Y({x:T.left+X,y:T.top+O,db:I}),n([{time:0,db:I},{time:d,db:I}])}}},H=()=>{if(!b.current)return;const c=b.current;if(c.type==="point"&&c.pointIndex!==void 0)if(c.hasMoved){if(c.hiddenIndices.length>0){const T=[...e];c.hiddenIndices.sort((X,U)=>U-X).forEach(X=>{T.splice(X,1)}),n(T)}}else{const T=[...e];T.splice(c.pointIndex,1),n(T)}else if(c.type==="segment"&&!c.hasMoved)if(e.length===2&&e[0].time===0&&Math.abs(e[1].time-d)<Ee){const X=c.startX/r*d,U=Se(c.startY,v);n([{time:X,db:U}])}else{const X=c.startX/r*d,U=Se(c.startY,v),k={time:X,db:U},ce=X<Ee,ve=e.some(Z=>Z.time<Ee);if(!ce||!ve){const Z=[...e,k].sort((I,O)=>I.time-O.time);n(Z)}}Q([]),u==null||u([]),Y(null),b.current=null};return document.addEventListener("mousemove",j),document.addEventListener("mouseup",H),()=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",H)}},[e,d,r,v,n]);const M=j=>{if(!y.current)return;const H=y.current.getBoundingClientRect(),c=j.clientX-H.left,T=j.clientY-H.top,X=g(c,T);if(h(X),i){let U=null;for(let k=0;k<e.length;k++){const ce=e[k],ve=ce.time/d*r,Z=be(ce.db,v),I=c-ve,O=T-Z;if(Math.sqrt(I*I+O*O)<=De){U=k;break}}i(U)}},ne=()=>{h(!1),i&&i(null)};if(!l)return null;const me=j=>j===-1/0?"-∞ dB":`${j>=0?"+":""}${j.toFixed(1)} dB`;return w.jsxs(w.Fragment,{children:[w.jsx("div",{ref:y,onMouseDown:W,onMouseMove:M,onMouseLeave:ne,onClick:j=>{if(y.current){const H=y.current.getBoundingClientRect(),c=j.clientX-H.left,T=j.clientY-H.top;g(c,T)&&j.stopPropagation()}},style:{position:"absolute",left:x,top:p,width:r,height:v,cursor:z?"crosshair":"text",pointerEvents:l?"auto":"none",zIndex:3}}),K&&w.jsx(Ct,{content:me(K.db),x:K.x,y:K.y,visible:!0})]})};function Ye(e,n,u,i){const l=[];if(e.length===0){const r=be(0,u);l.push({x1:0,y1:r,x2:n,y2:r})}else{const r=e[0].time===0?be(e[0].db,u):be(0,u),v=e[0].time/i*n,d=be(e[0].db,u);e[0].time>0&&l.push({x1:0,y1:r,x2:v,y2:d});for(let p=0;p<e.length-1;p++){const q=e[p].time/i*n,y=be(e[p].db,u),b=e[p+1].time/i*n,f=be(e[p+1].db,u);l.push({x1:q,y1:y,x2:b,y2:f})}const x=e[e.length-1];if(x.time<i){const p=x.time/i*n,q=be(x.db,u);l.push({x1:p,y1:q,x2:n,y2:q})}}return l}function Vt(e,n,u){if(e.length===0)return{segmentStartIndex:-1,segmentEndIndex:-1};if(e.length===1)return{segmentStartIndex:0,segmentEndIndex:0};if(n===0&&e[0].time>0)return{segmentStartIndex:0,segmentEndIndex:0};const l=e[0].time>0?n-1:n;return l>=0&&l<e.length-1?{segmentStartIndex:l,segmentEndIndex:l+1}:l===e.length-1?{segmentStartIndex:e.length-1,segmentEndIndex:e.length-1}:{segmentStartIndex:-1,segmentEndIndex:-1}}xt.__docgenInfo={description:`EnvelopeInteractionLayer - Handles envelope point editing interactions

This component provides a transparent interaction layer for envelope editing.
It can be positioned over any envelope visualization (clip or lane).`,methods:[],displayName:"EnvelopeInteractionLayer",props:{envelopePoints:{required:!0,tsType:{name:"Array",elements:[{name:"EnvelopePoint"}],raw:"EnvelopePoint[]"},description:"Envelope points (time is relative to clip/lane duration, 0-1)"},onEnvelopePointsChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(points: EnvelopePoint[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"EnvelopePoint"}],raw:"EnvelopePoint[]"},name:"points"}],return:{name:"void"}}},description:"Called when envelope points are updated"},onHiddenPointsChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(hiddenIndices: number[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"number"}],raw:"number[]"},name:"hiddenIndices"}],return:{name:"void"}}},description:"Called when hidden points change during drag (for eating visualization)"},onHoveredPointChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(pointIndex: number | null) => void",signature:{arguments:[{type:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},name:"pointIndex"}],return:{name:"void"}}},description:"Called when hovered point changes (for hover visual feedback)"},enabled:{required:!1,tsType:{name:"boolean"},description:"Whether envelope editing is enabled",defaultValue:{value:"true",computed:!1}},width:{required:!0,tsType:{name:"number"},description:"Width of the interaction area in pixels"},height:{required:!0,tsType:{name:"number"},description:"Height of the interaction area in pixels"},duration:{required:!0,tsType:{name:"number"},description:"Duration in seconds (for time calculations)"},x:{required:!1,tsType:{name:"number"},description:"X offset for positioning",defaultValue:{value:"0",computed:!1}},y:{required:!1,tsType:{name:"number"},description:"Y offset for positioning",defaultValue:{value:"0",computed:!1}},hiddenPointIndices:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:"Points to hide during drag (eating behavior)",defaultValue:{value:"[]",computed:!1}}}};const ze=(e,n=5e4)=>{const u=Math.floor(e*n),i=[];for(let l=0;l<u;l++){const r=l/u,v=Math.abs(Math.sin(r*Math.PI*3+Math.random()*.5))*(.3+Math.abs(Math.sin(r*Math.PI*.5))*.7)*(.5+Math.random()*.5),x=(Math.sin(r*Math.PI*200+Math.random()*2)*.4+Math.sin(r*Math.PI*500+Math.random()*3)*.3+Math.sin(r*Math.PI*1200+Math.random()*5)*.2+(Math.random()-.5)*.3)*v;i.push(Math.max(-1,Math.min(1,x)))}return i},Pe=12,Xe=["blue","violet","magenta"];function Ht(e,n="colourful"){return n==="classic"?"classic":Xe[e%Xe.length]}const Me=({clips:e,height:n=114,trackIndex:u,spectrogramMode:i=!1,splitView:l=!1,envelopeMode:r=!1,isSelected:v=!1,isFocused:d=!1,isMuted:x=!1,isLabelTrack:p=!1,pixelsPerSecond:q=100,width:y,backgroundColor:b="#212433",onClipClick:f,onTrackClick:Q,onEnvelopePointsChange:K,onClipHeaderClick:Y,onClipMenuClick:z,onClipTrimEdge:h,tabIndex:g,onFocusChange:W,onClipMove:M,onClipTrim:ne,onClipMoveToTrack:me,onClipNavigateVertical:j,timeSelection:H,isTimeSelectionDragging:c=!1,clipStyle:T="colourful",recordingClipId:X=null,envelopePointSizes:U,channelSplitRatio:k=.5,onChannelSplitRatioChange:ce})=>{const ve=Ht(u,T),[Z,I]=le.useState(new Map),[O,se]=le.useState(new Map),[a,D]=le.useState(!1),[A,B]=le.useState(!1),[pe,_]=le.useState(!1),ee=le.useRef(null);le.useEffect(()=>{if(!A||!ce)return;const s=de=>{if(!ee.current)return;const re=ee.current.getBoundingClientRect(),R=de.clientY-re.top,C=20,E=n-C,te=R-C,$=16,o=$/E,P=1-$/E,N=Math.max(o,Math.min(P,te/E));ce(N)},S=()=>{B(!1),document.body.style.cursor=""};return document.addEventListener("mousemove",s),document.addEventListener("mouseup",S),()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",S)}},[A,ce,n]);const oe=()=>{const s=b;return v?`color-mix(in srgb, ${s} 84%, white 16%)`:`color-mix(in srgb, ${s} 92%, white 8%)`},J=()=>e.map((s,S)=>{const de=Pe+s.start*q,re=s.duration*q,R=S===0;let C=s.waveform,E=s.waveformLeft,te=s.waveformRight;const $=!!(s.waveformLeft||s.waveformRight),P=(s.trimStart||0)+s.duration;!C&&!$&&(C=ze(P,1800)),$&&(!E||!te)&&(E=ze(P,1800),te=ze(P,1800));let N="waveform",m="mono";l?(m=$?"split-stereo":"split-mono",N="spectrogram"):i?(m=$?"stereo":"mono",N="spectrogram"):(m=$?"stereo":"mono",N="waveform");const G=s.selected||!1;return w.jsx("div",{"data-clip-id":s.id,"data-track-index":u,"data-first-clip":R,style:{position:"absolute",left:`${de}px`,top:0},tabIndex:R&&g!==void 0?g:-1,role:"button","aria-label":`${s.name} clip`,onKeyDown:t=>{var L,ge;if(!(t.key==="Delete"||t.key==="Backspace")){if(t.key==="Enter"){t.preventDefault(),t.stopPropagation(),f==null||f(s.id,t.shiftKey);return}if(t.shiftKey&&t.key==="F10"||t.key==="ContextMenu"){t.preventDefault(),t.stopPropagation();const F=t.currentTarget.getBoundingClientRect();z==null||z(s.id,F.right-20,F.top+10,!0);return}if((t.metaKey||t.ctrlKey)&&(t.key==="ArrowLeft"||t.key==="ArrowRight")&&!t.shiftKey){t.preventDefault();const V=.1,F=t.key==="ArrowRight"?V:-V;M==null||M(s.id,F);return}if((t.metaKey||t.ctrlKey)&&(t.key==="ArrowUp"||t.key==="ArrowDown")&&!t.shiftKey){t.preventDefault();const V=t.key==="ArrowDown"?1:-1;me==null||me(s.id,V);return}if(t.shiftKey&&(t.key==="ArrowLeft"||t.key==="ArrowRight")){t.preventDefault();const V=.1,F=t.metaKey||t.ctrlKey,ie=F?t.key==="ArrowLeft"?"right":"left":t.key==="ArrowLeft"?"left":"right",he=F?V:-V;ne==null||ne(s.id,ie,he);return}if((t.key==="ArrowDown"||t.key==="ArrowUp")&&!t.metaKey&&!t.ctrlKey&&!t.shiftKey){t.preventDefault();const V=t.key==="ArrowDown"?1:-1;j==null||j(s.id,V);return}if(t.key==="ArrowRight"&&!t.metaKey&&!t.ctrlKey&&!t.shiftKey){t.preventDefault();const V=(S+1)%e.length,F=(L=t.currentTarget.parentElement)==null?void 0:L.querySelectorAll('[role="button"]');if(F){const ie=F[V];ie&&(ie.tabIndex=g!==void 0?g:0,ie.focus({preventScroll:!0}),t.currentTarget.tabIndex=-1)}}else if(t.key==="ArrowLeft"&&!t.metaKey&&!t.ctrlKey&&!t.shiftKey){t.preventDefault();const V=(S-1+e.length)%e.length,F=(ge=t.currentTarget.parentElement)==null?void 0:ge.querySelectorAll('[role="button"]');if(F){const ie=F[V];ie&&(ie.tabIndex=g!==void 0?g:0,ie.focus({preventScroll:!0}),t.currentTarget.tabIndex=-1)}}}},children:w.jsx(bt,{color:T==="classic"?"classic":s.color||ve,name:s.name,width:re,height:n,selected:G,inTimeSelection:H&&v&&H.renderOnCanvas!==!1?s.start<H.endTime&&s.start+s.duration>H.startTime:!1,clipStartTime:s.start,timeSelectionRange:H,variant:N,channelMode:m,waveformData:C,waveformDataRms:s.waveformRms,waveformLeft:E,waveformRight:te,waveformLeftRms:s.waveformLeftRms,waveformRightRms:s.waveformRightRms,channelSplitRatio:k,envelope:s.envelopePoints,showEnvelope:r,clipDuration:s.duration,clipTrimStart:s.trimStart||0,clipFullDuration:s.fullDuration,pixelsPerSecond:q,hiddenPointIndices:Z.get(s.id)||[],hoveredPointIndex:O.get(s.id)??null,envelopePointSizes:U,isRecording:X===s.id,onHeaderClick:t=>f==null?void 0:f(s.id,t),onMenuClick:(t,L)=>z==null?void 0:z(s.id,t,L),onTrimEdge:h?({edge:t,clientX:L})=>h(s.id,t,L):void 0})},s.id)}),ue=()=>{if(!r||!K)return null;const s=20;return e.map(S=>{const de=Pe+S.start*q,re=S.duration*q;return w.jsx(xt,{envelopePoints:S.envelopePoints||[],onEnvelopePointsChange:R=>K(S.id,R),onHiddenPointsChange:R=>{I(C=>{const E=new Map(C);return R.length>0?E.set(S.id,R):E.delete(S.id),E})},onHoveredPointChange:R=>{se(C=>{const E=new Map(C);return R!==null?E.set(S.id,R):E.delete(S.id),E})},enabled:r,width:re,height:n-s,duration:S.duration,x:de,y:s},`envelope-${S.id}`)})},fe=s=>{D(!0),W==null||W(!0)},Te=s=>{const S=s.relatedTarget,de=s.currentTarget;(!S||!de.contains(S))&&(de.querySelectorAll('[role="button"]').forEach((R,C)=>{R.tabIndex=C===0&&g!==void 0?g:-1}),D(!1),W==null||W(!1))},ae=`track-wrapper ${d?"track-wrapper--focused":""}`,ye=()=>{if(!H)return null;const s=Pe+H.startTime*q,de=Pe+H.endTime*q-s,re=v?c?"#647F8F":"#627788":"#313846";return w.jsx("div",{style:{position:"absolute",left:`${s}px`,top:0,width:`${de}px`,height:`${n}px`,backgroundColor:re,pointerEvents:"none",zIndex:0}})};return w.jsx("div",{className:ae,"data-track-index":u,children:w.jsxs("div",{ref:ee,className:`track ${v?"track--selected":""} ${x?"track--muted":""}`,style:{position:"relative",width:`${y}px`,height:`${n}px`,backgroundColor:oe(),opacity:x?.5:1},onClick:Q,onFocus:fe,onBlur:Te,children:[!p&&n>44&&w.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"20px",backgroundColor:"rgba(0, 0, 0, 0.15)",pointerEvents:"none",zIndex:0}}),ye(),J(),ue(),l&&ce&&w.jsx("div",{onMouseDown:s=>{s.preventDefault(),s.stopPropagation(),B(!0),document.body.style.cursor="ns-resize"},onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),style:{position:"absolute",top:`${20+(n-20)*k}px`,left:0,width:"100%",height:pe||A?"3px":"1px",backgroundColor:pe||A?"rgba(255, 255, 255, 0.3)":"rgba(255, 255, 255, 0.1)",cursor:"ns-resize",zIndex:10,transform:pe||A?"translateY(-1px)":"none",transition:A?"none":"all 0.1s ease"}})]})})};Me.__docgenInfo={description:"Track component - renders a single audio track with clips using Clip components",methods:[],displayName:"TrackNew",props:{clips:{required:!0,tsType:{name:"Array",elements:[{name:"TrackClip"}],raw:"TrackClip[]"},description:"Array of clips to display on this track"},height:{required:!1,tsType:{name:"number"},description:`Height of the track in pixels
@default 114`,defaultValue:{value:"114",computed:!1}},trackIndex:{required:!0,tsType:{name:"number"},description:`Track index (0-based, determines color scheme)
- 0 = Blue
- 1 = Violet
- 2 = Magenta
- Cycles through colors for higher indices`},spectrogramMode:{required:!1,tsType:{name:"boolean"},description:`Whether to show spectrogram view
@default false`,defaultValue:{value:"false",computed:!1}},splitView:{required:!1,tsType:{name:"boolean"},description:`Whether to show split view (spectrogram + waveform)
@default false`,defaultValue:{value:"false",computed:!1}},envelopeMode:{required:!1,tsType:{name:"boolean"},description:`Whether envelope mode is active
@default false`,defaultValue:{value:"false",computed:!1}},isSelected:{required:!1,tsType:{name:"boolean"},description:"Whether the track is selected",defaultValue:{value:"false",computed:!1}},isFocused:{required:!1,tsType:{name:"boolean"},description:"Whether the track has focus",defaultValue:{value:"false",computed:!1}},isMuted:{required:!1,tsType:{name:"boolean"},description:"Whether the track is muted",defaultValue:{value:"false",computed:!1}},isLabelTrack:{required:!1,tsType:{name:"boolean"},description:`Whether this is a label track (hides clip header recess)
@default false`,defaultValue:{value:"false",computed:!1}},pixelsPerSecond:{required:!1,tsType:{name:"number"},description:`Pixels per second (zoom level)
@default 100`,defaultValue:{value:"100",computed:!1}},width:{required:!0,tsType:{name:"number"},description:"Width of the track in pixels"},backgroundColor:{required:!1,tsType:{name:"string"},description:`Background color for track
@default '#212433'`,defaultValue:{value:"'#212433'",computed:!1}},onClipClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(clipId: string | number, shiftKey?: boolean) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"clipId"},{type:{name:"boolean"},name:"shiftKey"}],return:{name:"void"}}},description:"Callback when a clip is clicked"},onTrackClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Callback when track background is clicked"},onEnvelopePointsChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(clipId: string | number, points: Array<{ time: number; db: number }>) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"clipId"},{type:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ time: number; db: number }",signature:{properties:[{key:"time",value:{name:"number",required:!0}},{key:"db",value:{name:"number",required:!0}}]}}],raw:"Array<{ time: number; db: number }>"},name:"points"}],return:{name:"void"}}},description:"Callback when envelope points change"},onClipHeaderClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(clipId: string | number, clipStartTime: number) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"clipId"},{type:{name:"number"},name:"clipStartTime"}],return:{name:"void"}}},description:"Callback when a clip header is clicked"},onClipMenuClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(clipId: string | number, x: number, y: number, openedViaKeyboard?: boolean) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"clipId"},{type:{name:"number"},name:"x"},{type:{name:"number"},name:"y"},{type:{name:"boolean"},name:"openedViaKeyboard"}],return:{name:"void"}}},description:"Callback when a clip menu button is clicked"},onClipTrimEdge:{required:!1,tsType:{name:"signature",type:"function",raw:"(clipId: string | number, edge: 'left' | 'right', clientX: number) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"clipId"},{type:{name:"union",raw:"'left' | 'right'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'right'"}]},name:"edge"},{type:{name:"number"},name:"clientX"}],return:{name:"void"}}},description:"Callback when a clip edge is being trimmed"},tabIndex:{required:!1,tsType:{name:"number"},description:"Tab index for keyboard navigation"},onFocusChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(hasFocus: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"hasFocus"}],return:{name:"void"}}},description:"Callback when keyboard focus changes"},onClipMove:{required:!1,tsType:{name:"signature",type:"function",raw:"(clipId: string | number, deltaSeconds: number) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"clipId"},{type:{name:"number"},name:"deltaSeconds"}],return:{name:"void"}}},description:"Callback when a clip should be moved (Cmd+Arrow keys)"},onClipTrim:{required:!1,tsType:{name:"signature",type:"function",raw:"(clipId: string | number, edge: 'left' | 'right', deltaSeconds: number) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"clipId"},{type:{name:"union",raw:"'left' | 'right'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'right'"}]},name:"edge"},{type:{name:"number"},name:"deltaSeconds"}],return:{name:"void"}}},description:"Callback when a clip should be trimmed (Shift+Arrow keys)"},onClipMoveToTrack:{required:!1,tsType:{name:"signature",type:"function",raw:"(clipId: string | number, direction: 1 | -1) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"clipId"},{type:{name:"union",raw:"1 | -1",elements:[{name:"literal",value:"1"},{name:"literal",value:"-1"}]},name:"direction"}],return:{name:"void"}}},description:"Callback when a clip should be moved to a different track (Cmd+Arrow Up/Down)"},onClipNavigateVertical:{required:!1,tsType:{name:"signature",type:"function",raw:"(clipId: string | number, direction: 1 | -1) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"clipId"},{type:{name:"union",raw:"1 | -1",elements:[{name:"literal",value:"1"},{name:"literal",value:"-1"}]},name:"direction"}],return:{name:"void"}}},description:"Callback when navigating vertically between tracks (Arrow Up/Down without modifiers)"},timeSelection:{required:!1,tsType:{name:"union",raw:"{ startTime: number; endTime: number } | null",elements:[{name:"signature",type:"object",raw:"{ startTime: number; endTime: number }",signature:{properties:[{key:"startTime",value:{name:"number",required:!0}},{key:"endTime",value:{name:"number",required:!0}}]}},{name:"null"}]},description:"Time selection range (for rendering vibrant clip colors within selection)"},isTimeSelectionDragging:{required:!1,tsType:{name:"boolean"},description:"Whether time selection is currently being dragged",defaultValue:{value:"false",computed:!1}},clipStyle:{required:!1,tsType:{name:"union",raw:"'classic' | 'colourful'",elements:[{name:"literal",value:"'classic'"},{name:"literal",value:"'colourful'"}]},description:"Clip style preference ('classic' or 'colourful')",defaultValue:{value:"'colourful'",computed:!1}},recordingClipId:{required:!1,tsType:{name:"union",raw:"string | number | null",elements:[{name:"string"},{name:"number"},{name:"null"}]},description:"ID of the clip currently being recorded (to show recording state)",defaultValue:{value:"null",computed:!1}},envelopePointSizes:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  outerRadius: number;
  innerRadius: number;
  outerRadiusHover: number;
  innerRadiusHover: number;
}`,signature:{properties:[{key:"outerRadius",value:{name:"number",required:!0}},{key:"innerRadius",value:{name:"number",required:!0}},{key:"outerRadiusHover",value:{name:"number",required:!0}},{key:"innerRadiusHover",value:{name:"number",required:!0}}]}},description:"Envelope control point sizes (for MuseScore vs AU4 style)"},channelSplitRatio:{required:!1,tsType:{name:"number"},description:`Split view ratio (0-1, where 0.5 is center)
Controls the position of the divider between spectrogram (top) and waveform (bottom)
@default 0.5`,defaultValue:{value:"0.5",computed:!1}},onChannelSplitRatioChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(ratio: number) => void",signature:{arguments:[{type:{name:"number"},name:"ratio"}],return:{name:"void"}}},description:"Callback when split view ratio changes (user drags divider)"}}};const _t={title:"Audio Components/Track (New)",component:Me,parameters:{layout:"fullscreen"},tags:["autodocs"]},Ie=[{id:1,name:"Intro",start:0,duration:2.5,selected:!1},{id:2,name:"Verse 1",start:3,duration:4,selected:!1},{id:3,name:"Chorus",start:8,duration:3.5,selected:!1}],Ve={args:{clips:[],height:114,trackIndex:0,isSelected:!1,isFocused:!1,isMuted:!1,pixelsPerSecond:100,width:2e3,backgroundColor:"#212433"},render:e=>le.createElement("div",{style:{padding:"20px",backgroundColor:"#212433",minHeight:"200px"}},le.createElement(Me,{...e}))},He={args:{clips:Ie,height:114,trackIndex:0,isSelected:!1,isFocused:!1,isMuted:!1,pixelsPerSecond:100,width:2e3,backgroundColor:"#212433"},render:e=>le.createElement("div",{style:{padding:"20px",backgroundColor:"#212433",minHeight:"200px"}},le.createElement(Me,{...e}))},Re={args:{clips:Ie.map((e,n)=>({...e,selected:n===1})),height:114,trackIndex:0,isSelected:!0,isFocused:!1,isMuted:!1,pixelsPerSecond:100,width:2e3,backgroundColor:"#212433"},render:e=>le.createElement("div",{style:{padding:"20px",backgroundColor:"#212433",minHeight:"200px"}},le.createElement(Me,{...e}))},Ae={args:{clips:Ie,height:114,trackIndex:0,isSelected:!1,isFocused:!1,isMuted:!1,pixelsPerSecond:100,width:2e3,backgroundColor:"#212433"},render:e=>le.createElement("div",{style:{padding:"20px",backgroundColor:"#212433",minHeight:"200px"}},le.createElement(Me,{...e}))},_e={args:{clips:Ie,height:114,trackIndex:0,isSelected:!1,isFocused:!1,isMuted:!0,pixelsPerSecond:100,width:2e3,backgroundColor:"#212433"},render:e=>le.createElement("div",{style:{padding:"20px",backgroundColor:"#212433",minHeight:"200px"}},le.createElement(Me,{...e}))},$e={args:{clips:Ie,height:114,trackIndex:0,isSelected:!1,isFocused:!0,isMuted:!1,pixelsPerSecond:100,width:2e3,backgroundColor:"#212433"},render:e=>le.createElement("div",{style:{padding:"20px",backgroundColor:"#212433",minHeight:"200px"}},le.createElement(Me,{...e}))},je={args:{clips:Ie.map((e,n)=>({...e,selected:n===1})),height:114,trackIndex:0,isSelected:!0,isFocused:!0,isMuted:!1,pixelsPerSecond:100,width:2e3,backgroundColor:"#212433"},render:e=>le.createElement("div",{style:{padding:"20px",backgroundColor:"#212433",minHeight:"200px"}},le.createElement(Me,{...e}))};var Fe,Ke,Ge;Ve.parameters={...Ve.parameters,docs:{...(Fe=Ve.parameters)==null?void 0:Fe.docs,source:{originalSource:`{
  args: {
    clips: [],
    height: 114,
    trackIndex: 0,
    isSelected: false,
    isFocused: false,
    isMuted: false,
    pixelsPerSecond: 100,
    width: 2000,
    backgroundColor: '#212433'
  },
  render: args => <div style={{
    padding: '20px',
    backgroundColor: '#212433',
    minHeight: '200px'
  }}>
      <TrackNew {...args} />
    </div>
}`,...(Ge=(Ke=Ve.parameters)==null?void 0:Ke.docs)==null?void 0:Ge.source}}};var Ue,Je,Qe;He.parameters={...He.parameters,docs:{...(Ue=He.parameters)==null?void 0:Ue.docs,source:{originalSource:`{
  args: {
    clips: sampleClips,
    height: 114,
    trackIndex: 0,
    isSelected: false,
    isFocused: false,
    isMuted: false,
    pixelsPerSecond: 100,
    width: 2000,
    backgroundColor: '#212433'
  },
  render: args => <div style={{
    padding: '20px',
    backgroundColor: '#212433',
    minHeight: '200px'
  }}>
      <TrackNew {...args} />
    </div>
}`,...(Qe=(Je=He.parameters)==null?void 0:Je.docs)==null?void 0:Qe.source}}};var Ze,et,tt;Re.parameters={...Re.parameters,docs:{...(Ze=Re.parameters)==null?void 0:Ze.docs,source:{originalSource:`{
  args: {
    clips: sampleClips.map((clip, idx) => ({
      ...clip,
      selected: idx === 1 // Select middle clip
    })),
    height: 114,
    trackIndex: 0,
    isSelected: true,
    isFocused: false,
    isMuted: false,
    pixelsPerSecond: 100,
    width: 2000,
    backgroundColor: '#212433'
  },
  render: args => <div style={{
    padding: '20px',
    backgroundColor: '#212433',
    minHeight: '200px'
  }}>
      <TrackNew {...args} />
    </div>
}`,...(tt=(et=Re.parameters)==null?void 0:et.docs)==null?void 0:tt.source}}};var nt,at,rt;Ae.parameters={...Ae.parameters,docs:{...(nt=Ae.parameters)==null?void 0:nt.docs,source:{originalSource:`{
  args: {
    clips: sampleClips,
    height: 114,
    trackIndex: 0,
    isSelected: false,
    isFocused: false,
    isMuted: false,
    pixelsPerSecond: 100,
    width: 2000,
    backgroundColor: '#212433'
  },
  render: args => <div style={{
    padding: '20px',
    backgroundColor: '#212433',
    minHeight: '200px'
  }}>
      <TrackNew {...args} />
    </div>
}`,...(rt=(at=Ae.parameters)==null?void 0:at.docs)==null?void 0:rt.source}}};var st,ot,it;_e.parameters={..._e.parameters,docs:{...(st=_e.parameters)==null?void 0:st.docs,source:{originalSource:`{
  args: {
    clips: sampleClips,
    height: 114,
    trackIndex: 0,
    isSelected: false,
    isFocused: false,
    isMuted: true,
    pixelsPerSecond: 100,
    width: 2000,
    backgroundColor: '#212433'
  },
  render: args => <div style={{
    padding: '20px',
    backgroundColor: '#212433',
    minHeight: '200px'
  }}>
      <TrackNew {...args} />
    </div>
}`,...(it=(ot=_e.parameters)==null?void 0:ot.docs)==null?void 0:it.source}}};var lt,ut,dt;$e.parameters={...$e.parameters,docs:{...(lt=$e.parameters)==null?void 0:lt.docs,source:{originalSource:`{
  args: {
    clips: sampleClips,
    height: 114,
    trackIndex: 0,
    isSelected: false,
    isFocused: true,
    isMuted: false,
    pixelsPerSecond: 100,
    width: 2000,
    backgroundColor: '#212433'
  },
  render: args => <div style={{
    padding: '20px',
    backgroundColor: '#212433',
    minHeight: '200px'
  }}>
      <TrackNew {...args} />
    </div>
}`,...(dt=(ut=$e.parameters)==null?void 0:ut.docs)==null?void 0:dt.source}}};var mt,ct,pt;je.parameters={...je.parameters,docs:{...(mt=je.parameters)==null?void 0:mt.docs,source:{originalSource:`{
  args: {
    clips: sampleClips.map((clip, idx) => ({
      ...clip,
      selected: idx === 1
    })),
    height: 114,
    trackIndex: 0,
    isSelected: true,
    isFocused: true,
    isMuted: false,
    pixelsPerSecond: 100,
    width: 2000,
    backgroundColor: '#212433'
  },
  render: args => <div style={{
    padding: '20px',
    backgroundColor: '#212433',
    minHeight: '200px'
  }}>
      <TrackNew {...args} />
    </div>
}`,...(pt=(ct=je.parameters)==null?void 0:ct.docs)==null?void 0:pt.source}}};const $t=["Empty","Populated","Selected","Idle","Muted","Focused","FocusedAndSelected"];export{Ve as Empty,$e as Focused,je as FocusedAndSelected,Ae as Idle,_e as Muted,He as Populated,Re as Selected,$t as __namedExportsOrder,_t as default};
